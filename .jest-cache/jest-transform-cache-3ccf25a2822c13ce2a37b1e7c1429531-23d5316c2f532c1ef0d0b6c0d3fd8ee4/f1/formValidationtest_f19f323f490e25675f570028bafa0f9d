5a298d7c458103a052e1e00a3d771df7
"use strict";
/**
 * Tests para validación de formularios
 * Validaciones para eventos, códigos promocionales y usuarios
 */
Object.defineProperty(exports, "__esModule", { value: true });
function validateEventForm(data) {
    var _a, _b, _c;
    const errors = {};
    // Validar título
    if (!((_a = data.title) === null || _a === void 0 ? void 0 : _a.trim())) {
        errors.title = 'El título es requerido';
    }
    else if (data.title.length < 5) {
        errors.title = 'El título debe tener al menos 5 caracteres';
    }
    else if (data.title.length > 100) {
        errors.title = 'El título no puede exceder 100 caracteres';
    }
    // Validar descripción
    if (!((_b = data.description) === null || _b === void 0 ? void 0 : _b.trim())) {
        errors.description = 'La descripción es requerida';
    }
    else if (data.description.length < 20) {
        errors.description = 'La descripción debe tener al menos 20 caracteres';
    }
    else if (data.description.length > 2000) {
        errors.description = 'La descripción no puede exceder 2000 caracteres';
    }
    // Validar fecha de inicio
    if (!data.startDate) {
        errors.startDate = 'La fecha de inicio es requerida';
    }
    else {
        const startDate = new Date(data.startDate);
        const now = new Date();
        if (startDate <= now) {
            errors.startDate = 'La fecha de inicio debe ser futura';
        }
    }
    // Validar fecha de fin (si existe)
    if (data.endDate) {
        const startDate = new Date(data.startDate || '');
        const endDate = new Date(data.endDate);
        if (endDate <= startDate) {
            errors.endDate = 'La fecha de fin debe ser posterior a la fecha de inicio';
        }
    }
    // Validar ubicación
    if (!((_c = data.location) === null || _c === void 0 ? void 0 : _c.trim())) {
        errors.location = 'La ubicación es requerida';
    }
    else if (data.location.length < 5) {
        errors.location = 'La ubicación debe tener al menos 5 caracteres';
    }
    // Validar categoría
    if (!data.categoryId) {
        errors.categoryId = 'La categoría es requerida';
    }
    // Validar tipos de ticket
    if (!data.ticketTypes || data.ticketTypes.length === 0) {
        errors.ticketTypes = 'Debe agregar al menos un tipo de ticket';
    }
    else {
        data.ticketTypes.forEach((ticket, index) => {
            var _a;
            if (!((_a = ticket.name) === null || _a === void 0 ? void 0 : _a.trim())) {
                errors[`ticketTypes.${index}.name`] = 'El nombre del ticket es requerido';
            }
            if (ticket.price < 0) {
                errors[`ticketTypes.${index}.price`] = 'El precio no puede ser negativo';
            }
            if (ticket.capacity <= 0) {
                errors[`ticketTypes.${index}.capacity`] = 'La capacidad debe ser mayor a 0';
            }
        });
    }
    return {
        isValid: Object.keys(errors).length === 0,
        errors,
    };
}
// ============================================================================
// VALIDADORES DE CÓDIGOS PROMOCIONALES
// ============================================================================
function validatePromoCodeForm(data) {
    var _a, _b;
    const errors = {};
    // Validar código
    if (!((_a = data.code) === null || _a === void 0 ? void 0 : _a.trim())) {
        errors.code = 'El código es requerido';
    }
    else if (data.code.length < 3) {
        errors.code = 'El código debe tener al menos 3 caracteres';
    }
    else if (data.code.length > 20) {
        errors.code = 'El código no puede exceder 20 caracteres';
    }
    else if (!/^[A-Z0-9]+$/.test(data.code)) {
        errors.code = 'El código solo puede contener letras mayúsculas y números';
    }
    // Validar nombre
    if (!((_b = data.name) === null || _b === void 0 ? void 0 : _b.trim())) {
        errors.name = 'El nombre es requerido';
    }
    else if (data.name.length < 5) {
        errors.name = 'El nombre debe tener al menos 5 caracteres';
    }
    // Validar tipo y valor
    if (!data.type) {
        errors.type = 'El tipo de descuento es requerido';
    }
    else {
        if (data.value === undefined || data.value === null) {
            errors.value = 'El valor del descuento es requerido';
        }
        else if (data.value <= 0) {
            errors.value = 'El valor debe ser mayor a 0';
        }
        else if (data.type === 'PERCENTAGE' && data.value > 100) {
            errors.value = 'El porcentaje no puede ser mayor a 100%';
        }
        else if (data.type === 'FIXED_AMOUNT' && data.value > 1000000) {
            errors.value = 'El monto fijo no puede exceder $1,000,000';
        }
    }
    // Validar fechas
    if (!data.validFrom) {
        errors.validFrom = 'La fecha de inicio es requerida';
    }
    if (data.validFrom && data.validUntil) {
        const fromDate = new Date(data.validFrom);
        const untilDate = new Date(data.validUntil);
        if (untilDate <= fromDate) {
            errors.validUntil = 'La fecha de fin debe ser posterior a la fecha de inicio';
        }
    }
    // Validar límite de uso
    if (data.usageLimit !== undefined && data.usageLimit <= 0) {
        errors.usageLimit = 'El límite de uso debe ser mayor a 0';
    }
    return {
        isValid: Object.keys(errors).length === 0,
        errors,
    };
}
// ============================================================================
// VALIDADORES DE PERFIL DE USUARIO
// ============================================================================
function validateUserProfileForm(data) {
    var _a, _b;
    const errors = {};
    // Validar nombre
    if (data.firstName !== undefined) {
        if (!((_a = data.firstName) === null || _a === void 0 ? void 0 : _a.trim())) {
            errors.firstName = 'El nombre es requerido';
        }
        else if (data.firstName.length < 2) {
            errors.firstName = 'El nombre debe tener al menos 2 caracteres';
        }
        else if (data.firstName.length > 50) {
            errors.firstName = 'El nombre no puede exceder 50 caracteres';
        }
    }
    // Validar apellido
    if (data.lastName !== undefined) {
        if (!((_b = data.lastName) === null || _b === void 0 ? void 0 : _b.trim())) {
            errors.lastName = 'El apellido es requerido';
        }
        else if (data.lastName.length < 2) {
            errors.lastName = 'El apellido debe tener al menos 2 caracteres';
        }
        else if (data.lastName.length > 50) {
            errors.lastName = 'El apellido no puede exceder 50 caracteres';
        }
    }
    // Validar biografía
    if (data.bio !== undefined && data.bio.length > 500) {
        errors.bio = 'La biografía no puede exceder 500 caracteres';
    }
    // Validar website
    if (data.website !== undefined && data.website) {
        const urlRegex = /^https?:\/\/.+\..+/;
        if (!urlRegex.test(data.website)) {
            errors.website = 'El sitio web debe ser una URL válida';
        }
    }
    // Validar teléfono
    if (data.phone !== undefined && data.phone) {
        const phoneRegex = /^\+?[\d\s-()]{8,15}$/;
        if (!phoneRegex.test(data.phone)) {
            errors.phone = 'El teléfono debe tener un formato válido';
        }
    }
    // Validar redes sociales
    if (data.socialLinks) {
        const urlRegex = /^https?:\/\/.+/;
        if (data.socialLinks.twitter && !urlRegex.test(data.socialLinks.twitter)) {
            errors['socialLinks.twitter'] = 'La URL de Twitter debe ser válida';
        }
        if (data.socialLinks.facebook && !urlRegex.test(data.socialLinks.facebook)) {
            errors['socialLinks.facebook'] = 'La URL de Facebook debe ser válida';
        }
        if (data.socialLinks.instagram && !urlRegex.test(data.socialLinks.instagram)) {
            errors['socialLinks.instagram'] = 'La URL de Instagram debe ser válida';
        }
        if (data.socialLinks.linkedin && !urlRegex.test(data.socialLinks.linkedin)) {
            errors['socialLinks.linkedin'] = 'La URL de LinkedIn debe ser válida';
        }
    }
    return {
        isValid: Object.keys(errors).length === 0,
        errors,
    };
}
// ============================================================================
// TESTS
// ============================================================================
describe('Validación de Formularios de Eventos', () => {
    const validEventData = {
        title: 'Evento de Prueba',
        description: 'Esta es una descripción válida con más de 20 caracteres',
        startDate: '2025-12-31T20:00:00Z',
        location: 'Santiago, Chile',
        categoryId: 'music',
        ticketTypes: [
            {
                name: 'General',
                price: 25000,
                capacity: 100,
                currency: 'CLP',
            },
        ],
    };
    it('valida un evento correcto', () => {
        const result = validateEventForm(validEventData);
        expect(result.isValid).toBe(true);
        expect(Object.keys(result.errors)).toHaveLength(0);
    });
    it('rechaza título vacío', () => {
        const result = validateEventForm(Object.assign(Object.assign({}, validEventData), { title: '' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.title).toBe('El título es requerido');
    });
    it('rechaza título muy corto', () => {
        const result = validateEventForm(Object.assign(Object.assign({}, validEventData), { title: 'Hi' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.title).toBe('El título debe tener al menos 5 caracteres');
    });
    it('rechaza descripción muy corta', () => {
        const result = validateEventForm(Object.assign(Object.assign({}, validEventData), { description: 'Corto' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.description).toBe('La descripción debe tener al menos 20 caracteres');
    });
    it('rechaza fecha de inicio en el pasado', () => {
        const result = validateEventForm(Object.assign(Object.assign({}, validEventData), { startDate: '2020-01-01T20:00:00Z' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.startDate).toBe('La fecha de inicio debe ser futura');
    });
    it('rechaza fecha de fin anterior a fecha de inicio', () => {
        const result = validateEventForm(Object.assign(Object.assign({}, validEventData), { startDate: '2025-12-31T20:00:00Z', endDate: '2025-12-31T19:00:00Z' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.endDate).toBe('La fecha de fin debe ser posterior a la fecha de inicio');
    });
    it('rechaza eventos sin tipos de ticket', () => {
        const result = validateEventForm(Object.assign(Object.assign({}, validEventData), { ticketTypes: [] }));
        expect(result.isValid).toBe(false);
        expect(result.errors.ticketTypes).toBe('Debe agregar al menos un tipo de ticket');
    });
    it('valida múltiples errores simultáneamente', () => {
        const result = validateEventForm({
            title: '',
            description: 'Corto',
            startDate: '',
            location: '',
            categoryId: '',
            ticketTypes: [],
        });
        expect(result.isValid).toBe(false);
        expect(Object.keys(result.errors)).toHaveLength(6);
    });
});
describe('Validación de Formularios de Códigos Promocionales', () => {
    const validPromoData = {
        code: 'SUMMER2024',
        name: 'Descuento de Verano',
        type: 'PERCENTAGE',
        value: 20,
        validFrom: '2024-01-01',
    };
    it('valida un código promocional correcto', () => {
        const result = validatePromoCodeForm(validPromoData);
        expect(result.isValid).toBe(true);
        expect(Object.keys(result.errors)).toHaveLength(0);
    });
    it('rechaza código vacío', () => {
        const result = validatePromoCodeForm(Object.assign(Object.assign({}, validPromoData), { code: '' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.code).toBe('El código es requerido');
    });
    it('rechaza código con caracteres inválidos', () => {
        const result = validatePromoCodeForm(Object.assign(Object.assign({}, validPromoData), { code: 'summer-2024' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.code).toBe('El código solo puede contener letras mayúsculas y números');
    });
    it('rechaza porcentaje mayor a 100', () => {
        const result = validatePromoCodeForm(Object.assign(Object.assign({}, validPromoData), { type: 'PERCENTAGE', value: 150 }));
        expect(result.isValid).toBe(false);
        expect(result.errors.value).toBe('El porcentaje no puede ser mayor a 100%');
    });
    it('rechaza monto fijo muy alto', () => {
        const result = validatePromoCodeForm(Object.assign(Object.assign({}, validPromoData), { type: 'FIXED_AMOUNT', value: 2000000 }));
        expect(result.isValid).toBe(false);
        expect(result.errors.value).toBe('El monto fijo no puede exceder $1,000,000');
    });
    it('valida fechas correctamente', () => {
        const result = validatePromoCodeForm(Object.assign(Object.assign({}, validPromoData), { validFrom: '2024-12-31', validUntil: '2024-01-01' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.validUntil).toBe('La fecha de fin debe ser posterior a la fecha de inicio');
    });
});
describe('Validación de Formularios de Perfil de Usuario', () => {
    const validProfileData = {
        firstName: 'Juan',
        lastName: 'Pérez',
        bio: 'Desarrollador apasionado por la tecnología',
        website: 'https://juanperez.dev',
        phone: '+56912345678',
        socialLinks: {
            twitter: 'https://twitter.com/juanperez',
            linkedin: 'https://linkedin.com/in/juanperez',
        },
    };
    it('valida un perfil correcto', () => {
        const result = validateUserProfileForm(validProfileData);
        expect(result.isValid).toBe(true);
        expect(Object.keys(result.errors)).toHaveLength(0);
    });
    it('rechaza nombre muy corto', () => {
        const result = validateUserProfileForm(Object.assign(Object.assign({}, validProfileData), { firstName: 'J' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.firstName).toBe('El nombre debe tener al menos 2 caracteres');
    });
    it('rechaza biografía muy larga', () => {
        const longBio = 'A'.repeat(501);
        const result = validateUserProfileForm(Object.assign(Object.assign({}, validProfileData), { bio: longBio }));
        expect(result.isValid).toBe(false);
        expect(result.errors.bio).toBe('La biografía no puede exceder 500 caracteres');
    });
    it('rechaza URL de website inválida', () => {
        const result = validateUserProfileForm(Object.assign(Object.assign({}, validProfileData), { website: 'not-a-url' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.website).toBe('El sitio web debe ser una URL válida');
    });
    it('rechaza teléfono inválido', () => {
        const result = validateUserProfileForm(Object.assign(Object.assign({}, validProfileData), { phone: '123' }));
        expect(result.isValid).toBe(false);
        expect(result.errors.phone).toBe('El teléfono debe tener un formato válido');
    });
    it('valida URLs de redes sociales', () => {
        const result = validateUserProfileForm(Object.assign(Object.assign({}, validProfileData), { socialLinks: {
                twitter: 'not-a-url',
                linkedin: 'https://linkedin.com/valid',
            } }));
        expect(result.isValid).toBe(false);
        expect(result.errors['socialLinks.twitter']).toBe('La URL de Twitter debe ser válida');
        expect(result.errors['socialLinks.linkedin']).toBeUndefined();
    });
    it('permite campos opcionales vacíos', () => {
        const result = validateUserProfileForm({
            firstName: 'Juan',
            lastName: 'Pérez',
        });
        expect(result.isValid).toBe(true);
    });
    it('valida múltiples redes sociales inválidas', () => {
        const result = validateUserProfileForm(Object.assign(Object.assign({}, validProfileData), { socialLinks: {
                twitter: 'invalid-twitter',
                facebook: 'invalid-facebook',
                instagram: 'invalid-instagram',
                linkedin: 'invalid-linkedin',
            } }));
        expect(result.isValid).toBe(false);
        expect(Object.keys(result.errors)).toHaveLength(4);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxCaWx1clxcRG9jdW1lbnRzXFxEZXZlbG9wbWVudFxcTmV4dFxcc29yeWNrLWFjY2Vzc1xcc3JjXFxfX3Rlc3RzX19cXGxpYlxcZm9ybVZhbGlkYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOztBQWFILFNBQVMsaUJBQWlCLENBQUMsSUFBOEI7O0lBQ3ZELE1BQU0sTUFBTSxHQUEyQixFQUFFLENBQUM7SUFFMUMsaUJBQWlCO0lBQ2pCLElBQUksQ0FBQyxDQUFBLE1BQUEsSUFBSSxDQUFDLEtBQUssMENBQUUsSUFBSSxFQUFFLENBQUEsRUFBRSxDQUFDO1FBQ3hCLE1BQU0sQ0FBQyxLQUFLLEdBQUcsd0JBQXdCLENBQUM7SUFDMUMsQ0FBQztTQUFNLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDakMsTUFBTSxDQUFDLEtBQUssR0FBRyw0Q0FBNEMsQ0FBQztJQUM5RCxDQUFDO1NBQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQztRQUNuQyxNQUFNLENBQUMsS0FBSyxHQUFHLDJDQUEyQyxDQUFDO0lBQzdELENBQUM7SUFFRCxzQkFBc0I7SUFDdEIsSUFBSSxDQUFDLENBQUEsTUFBQSxJQUFJLENBQUMsV0FBVywwQ0FBRSxJQUFJLEVBQUUsQ0FBQSxFQUFFLENBQUM7UUFDOUIsTUFBTSxDQUFDLFdBQVcsR0FBRyw2QkFBNkIsQ0FBQztJQUNyRCxDQUFDO1NBQU0sSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxFQUFFLEVBQUUsQ0FBQztRQUN4QyxNQUFNLENBQUMsV0FBVyxHQUFHLGtEQUFrRCxDQUFDO0lBQzFFLENBQUM7U0FBTSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLElBQUksRUFBRSxDQUFDO1FBQzFDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsaURBQWlELENBQUM7SUFDekUsQ0FBQztJQUVELDBCQUEwQjtJ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R0FBRyxFQUFFO1FBQzFDLE1BQU0sTUFBTSxHQUFHLHVCQUF1QixDQUFDO1lBQ3JDLFNBQVMsRUFBRSxNQUFNO1lBQ2pCLFFBQVEsRUFBRSxPQUFPO1NBQ2xCLENBQUMsQ0FBQztRQUNILE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLDJDQUEyQyxFQUFFLEdBQUcsRUFBRTtRQUNuRCxNQUFNLE1BQU0sR0FBRyx1QkFBdUIsaUNBQ2pDLGdCQUFnQixLQUNuQixXQUFXLEVBQUU7Z0JBQ1gsT0FBTyxFQUFFLGlCQUFpQjtnQkFDMUIsUUFBUSxFQUFFLGtCQUFrQjtnQkFDNUIsU0FBUyxFQUFFLG1CQUFtQjtnQkFDOUIsUUFBUSxFQUFFLGtCQUFrQjthQUM3QixJQUNELENBQUM7UUFDSCxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDckQsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXEJpbHVyXFxEb2N1bWVudHNcXERldmVsb3BtZW50XFxOZXh0XFxzb3J5Y2stYWNjZXNzXFxzcmNcXF9fdGVzdHNfX1xcbGliXFxmb3JtVmFsaWRhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUZXN0cyBwYXJhIHZhbGlkYWNpw7NuIGRlIGZvcm11bGFyaW9zXHJcbiAqIFZhbGlkYWNpb25lcyBwYXJhIGV2ZW50b3MsIGPDs2RpZ29zIHByb21vY2lvbmFsZXMgeSB1c3Vhcmlvc1xyXG4gKi9cclxuXHJcbmltcG9ydCB0eXBlIHsgQ3JlYXRlRXZlbnREYXRhLCBDcmVhdGVQcm9tb0NvZGVEYXRhLCBVcGRhdGVVc2VyUHJvZmlsZURhdGEgfSBmcm9tICdAL3R5cGVzJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVkFMSURBRE9SRVMgREUgRVZFTlRPU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbnRlcmZhY2UgRXZlbnRWYWxpZGF0aW9uUmVzdWx0IHtcclxuICBpc1ZhbGlkOiBib29sZWFuO1xyXG4gIGVycm9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVFdmVudEZvcm0oZGF0YTogUGFydGlhbDxDcmVhdGVFdmVudERhdGE+KTogRXZlbnRWYWxpZGF0aW9uUmVzdWx0IHtcclxuICBjb25zdCBlcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuXHJcbiAgLy8gVmFsaWRhciB0w610dWxvXHJcbiAgaWYgKCFkYXRhLnRpdGxlPy50cmltKCkpIHtcclxuICAgIGVycm9ycy50aXRsZSA9ICdFbCB0w610dWxvIGVzIHJlcXVlcmlkbyc7XHJcbiAgfSBlbHNlIGlmIChkYXRhLnRpdGxlLmxlbmd0aCA8IDUpIHtcclxuICAgIGVycm9ycy50aXRsZSA9ICdFbCB0w610dWxvIGRlYmUgdGVuZXIgYWwgbWVub3MgNSBjYXJhY3RlcmVzJztcclxuICB9IGVsc2UgaWYgKGRhdGEudGl0bGUubGVuZ3RoID4gMTAwKSB7XHJcbiAgICBlcnJvcnMudGl0bGUgPSAnRWwgdMOtdHVsbyBubyBwdWVkZSBleGNlZGVyIDEwMCBjYXJhY3RlcmVzJztcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXIgZGVzY3JpcGNpw7NuXHJcbiAgaWYgKCFkYXRhLmRlc2NyaXB0aW9uPy50cmltKCkpIHtcclxuICAgIGVycm9ycy5kZXNjcmlwdGlvbiA9ICdMYSBkZXNjcmlwY2nDs24gZXMgcmVxdWVyaWRhJztcclxuICB9IGVsc2UgaWYgKGRhdGEuZGVzY3JpcHRpb24ubGVuZ3RoIDwgMjApIHtcclxuICAgIGVycm9ycy5kZXNjcmlwdGlvbiA9ICdMYSBkZXNjcmlwY2nDs24gZGViZSB0ZW5lciBhbCBtZW5vcyAyMCBjYXJhY3RlcmVzJztcclxuICB9IGVsc2UgaWYgKGRhdGEuZGVzY3JpcHRpb24ubGVuZ3RoID4gMjAwMCkge1xyXG4gICAgZXJyb3JzLmRlc2NyaXB0aW9uID0gJ0xhIGRlc2NyaXBjacOzbiBubyBwdWVkZSBleGNlZGVyIDIwMDAgY2FyYWN0ZXJlcyc7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGFyIGZlY2hhIGRlIGluaWNpb1xyXG4gIGlmICghZGF0YS5zdGFydERhdGUpIHtcclxuICAgIGVycm9ycy5zdGFydERhdGUgPSAnTGEgZmVjaGEgZGUgaW5pY2lvIGVzIHJlcXVlcmlkYSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGRhdGEuc3RhcnREYXRlKTtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBpZiAoc3RhcnREYXRlIDw9IG5vdykge1xyXG4gICAgICBlcnJvcnMuc3RhcnREYXRlID0gJ0xhIGZlY2hhIGRlIGluaWNpbyBkZWJlIHNlciBmdXR1cmEnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciBmZWNoYSBkZSBmaW4gKHNpIGV4aXN0ZSlcclxuICBpZiAoZGF0YS5lbmREYXRlKSB7XHJcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShkYXRhLnN0YXJ0RGF0ZSB8fCAnJyk7XHJcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoZGF0YS5lbmREYXRlKTtcclxuICAgIGlmIChlbmREYXRlIDw9IHN0YXJ0RGF0ZSkge1xyXG4gICAgICBlcnJvcnMuZW5kRGF0ZSA9ICdMYSBmZWNoYSBkZSBmaW4gZGViZSBzZXIgcG9zdGVyaW9yIGEgbGEgZmVjaGEgZGUgaW5pY2lvJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXIgdWJpY2FjacOzblxyXG4gIGlmICghZGF0YS5sb2NhdGlvbj8udHJpbSgpKSB7XHJcbiAgICBlcnJvcnMubG9jYXRpb24gPSAnTGEgdWJpY2FjacOzbiBlcyByZXF1ZXJpZGEnO1xyXG4gIH0gZWxzZSBpZiAoZGF0YS5sb2NhdGlvbi5sZW5ndGggPCA1KSB7XHJcbiAgICBlcnJvcnMubG9jYXRpb24gPSAnTGEgdWJpY2FjacOzbiBkZWJlIHRlbmVyIGFsIG1lbm9zIDUgY2FyYWN0ZXJlcyc7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGFyIGNhdGVnb3LDrWFcclxuICBpZiAoIWRhdGEuY2F0ZWdvcnlJZCkge1xyXG4gICAgZXJyb3JzLmNhdGVnb3J5SWQgPSAnTGEgY2F0ZWdvcsOtYSBlcyByZXF1ZXJpZGEnO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciB0aXBvcyBkZSB0aWNrZXRcclxuICBpZiAoIWRhdGEudGlja2V0VHlwZXMgfHwgZGF0YS50aWNrZXRUeXBlcy5sZW5ndGggPT09IDApIHtcclxuICAgIGVycm9ycy50aWNrZXRUeXBlcyA9ICdEZWJlIGFncmVnYXIgYWwgbWVub3MgdW4gdGlwbyBkZSB0aWNrZXQnO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkYXRhLnRpY2tldFR5cGVzLmZvckVhY2goKHRpY2tldCwgaW5kZXgpID0+IHtcclxuICAgICAgaWYgKCF0aWNrZXQubmFtZT8udHJpbSgpKSB7XHJcbiAgICAgICAgZXJyb3JzW2B0aWNrZXRUeXBlcy4ke2luZGV4fS5uYW1lYF0gPSAnRWwgbm9tYnJlIGRlbCB0aWNrZXQgZXMgcmVxdWVyaWRvJztcclxuICAgICAgfVxyXG4gICAgICBpZiAodGlja2V0LnByaWNlIDwgMCkge1xyXG4gICAgICAgIGVycm9yc1tgdGlja2V0VHlwZXMuJHtpbmRleH0ucHJpY2VgXSA9ICdFbCBwcmVjaW8gbm8gcHVlZGUgc2VyIG5lZ2F0aXZvJztcclxuICAgICAgfVxyXG4gICAgICBpZiAodGlja2V0LmNhcGFjaXR5IDw9IDApIHtcclxuICAgICAgICBlcnJvcnNbYHRpY2tldFR5cGVzLiR7aW5kZXh9LmNhcGFjaXR5YF0gPSAnTGEgY2FwYWNpZGFkIGRlYmUgc2VyIG1heW9yIGEgMCc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlzVmFsaWQ6IE9iamVjdC5rZXlzKGVycm9ycykubGVuZ3RoID09PSAwLFxyXG4gICAgZXJyb3JzLFxyXG4gIH07XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVkFMSURBRE9SRVMgREUgQ8OTRElHT1MgUFJPTU9DSU9OQUxFU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZVByb21vQ29kZUZvcm0oZGF0YTogUGFydGlhbDxDcmVhdGVQcm9tb0NvZGVEYXRhPik6IEV2ZW50VmFsaWRhdGlvblJlc3VsdCB7XHJcbiAgY29uc3QgZXJyb3JzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcblxyXG4gIC8vIFZhbGlkYXIgY8OzZGlnb1xyXG4gIGlmICghZGF0YS5jb2RlPy50cmltKCkpIHtcclxuICAgIGVycm9ycy5jb2RlID0gJ0VsIGPDs2RpZ28gZXMgcmVxdWVyaWRvJztcclxuICB9IGVsc2UgaWYgKGRhdGEuY29kZS5sZW5ndGggPCAzKSB7XHJcbiAgICBlcnJvcnMuY29kZSA9ICdFbCBjw7NkaWdvIGRlYmUgdGVuZXIgYWwgbWVub3MgMyBjYXJhY3RlcmVzJztcclxuICB9IGVsc2UgaWYgKGRhdGEuY29kZS5sZW5ndGggPiAyMCkge1xyXG4gICAgZXJyb3JzLmNvZGUgPSAnRWwgY8OzZGlnbyBubyBwdWVkZSBleGNlZGVyIDIwIGNhcmFjdGVyZXMnO1xyXG4gIH0gZWxzZSBpZiAoIS9eW0EtWjAtOV0rJC8udGVzdChkYXRhLmNvZGUpKSB7XHJcbiAgICBlcnJvcnMuY29kZSA9ICdFbCBjw7NkaWdvIHNvbG8gcHVlZGUgY29udGVuZXIgbGV0cmFzIG1hecO6c2N1bGFzIHkgbsO6bWVyb3MnO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciBub21icmVcclxuICBpZiAoIWRhdGEubmFtZT8udHJpbSgpKSB7XHJcbiAgICBlcnJvcnMubmFtZSA9ICdFbCBub21icmUgZXMgcmVxdWVyaWRvJztcclxuICB9IGVsc2UgaWYgKGRhdGEubmFtZS5sZW5ndGggPCA1KSB7XHJcbiAgICBlcnJvcnMubmFtZSA9ICdFbCBub21icmUgZGViZSB0ZW5lciBhbCBtZW5vcyA1IGNhcmFjdGVyZXMnO1xyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciB0aXBvIHkgdmFsb3JcclxuICBpZiAoIWRhdGEudHlwZSkge1xyXG4gICAgZXJyb3JzLnR5cGUgPSAnRWwgdGlwbyBkZSBkZXNjdWVudG8gZXMgcmVxdWVyaWRvJztcclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKGRhdGEudmFsdWUgPT09IHVuZGVmaW5lZCB8fCBkYXRhLnZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgIGVycm9ycy52YWx1ZSA9ICdFbCB2YWxvciBkZWwgZGVzY3VlbnRvIGVzIHJlcXVlcmlkbyc7XHJcbiAgICB9IGVsc2UgaWYgKGRhdGEudmFsdWUgPD0gMCkge1xyXG4gICAgICBlcnJvcnMudmFsdWUgPSAnRWwgdmFsb3IgZGViZSBzZXIgbWF5b3IgYSAwJztcclxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnUEVSQ0VOVEFHRScgJiYgZGF0YS52YWx1ZSA+IDEwMCkge1xyXG4gICAgICBlcnJvcnMudmFsdWUgPSAnRWwgcG9yY2VudGFqZSBubyBwdWVkZSBzZXIgbWF5b3IgYSAxMDAlJztcclxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnRklYRURfQU1PVU5UJyAmJiBkYXRhLnZhbHVlID4gMTAwMDAwMCkge1xyXG4gICAgICBlcnJvcnMudmFsdWUgPSAnRWwgbW9udG8gZmlqbyBubyBwdWVkZSBleGNlZGVyICQxLDAwMCwwMDAnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciBmZWNoYXNcclxuICBpZiAoIWRhdGEudmFsaWRGcm9tKSB7XHJcbiAgICBlcnJvcnMudmFsaWRGcm9tID0gJ0xhIGZlY2hhIGRlIGluaWNpbyBlcyByZXF1ZXJpZGEnO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRhdGEudmFsaWRGcm9tICYmIGRhdGEudmFsaWRVbnRpbCkge1xyXG4gICAgY29uc3QgZnJvbURhdGUgPSBuZXcgRGF0ZShkYXRhLnZhbGlkRnJvbSk7XHJcbiAgICBjb25zdCB1bnRpbERhdGUgPSBuZXcgRGF0ZShkYXRhLnZhbGlkVW50aWwpO1xyXG4gICAgaWYgKHVudGlsRGF0ZSA8PSBmcm9tRGF0ZSkge1xyXG4gICAgICBlcnJvcnMudmFsaWRVbnRpbCA9ICdMYSBmZWNoYSBkZSBmaW4gZGViZSBzZXIgcG9zdGVyaW9yIGEgbGEgZmVjaGEgZGUgaW5pY2lvJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXIgbMOtbWl0ZSBkZSB1c29cclxuICBpZiAoZGF0YS51c2FnZUxpbWl0ICE9PSB1bmRlZmluZWQgJiYgZGF0YS51c2FnZUxpbWl0IDw9IDApIHtcclxuICAgIGVycm9ycy51c2FnZUxpbWl0ID0gJ0VsIGzDrW1pdGUgZGUgdXNvIGRlYmUgc2VyIG1heW9yIGEgMCc7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaXNWYWxpZDogT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPT09IDAsXHJcbiAgICBlcnJvcnMsXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBWQUxJREFET1JFUyBERSBQRVJGSUwgREUgVVNVQVJJT1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZVVzZXJQcm9maWxlRm9ybShkYXRhOiBQYXJ0aWFsPFVwZGF0ZVVzZXJQcm9maWxlRGF0YT4pOiBFdmVudFZhbGlkYXRpb25SZXN1bHQge1xyXG4gIGNvbnN0IGVycm9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xyXG5cclxuICAvLyBWYWxpZGFyIG5vbWJyZVxyXG4gIGlmIChkYXRhLmZpcnN0TmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBpZiAoIWRhdGEuZmlyc3ROYW1lPy50cmltKCkpIHtcclxuICAgICAgZXJyb3JzLmZpcnN0TmFtZSA9ICdFbCBub21icmUgZXMgcmVxdWVyaWRvJztcclxuICAgIH0gZWxzZSBpZiAoZGF0YS5maXJzdE5hbWUubGVuZ3RoIDwgMikge1xyXG4gICAgICBlcnJvcnMuZmlyc3ROYW1lID0gJ0VsIG5vbWJyZSBkZWJlIHRlbmVyIGFsIG1lbm9zIDIgY2FyYWN0ZXJlcyc7XHJcbiAgICB9IGVsc2UgaWYgKGRhdGEuZmlyc3ROYW1lLmxlbmd0aCA+IDUwKSB7XHJcbiAgICAgIGVycm9ycy5maXJzdE5hbWUgPSAnRWwgbm9tYnJlIG5vIHB1ZWRlIGV4Y2VkZXIgNTAgY2FyYWN0ZXJlcyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGFyIGFwZWxsaWRvXHJcbiAgaWYgKGRhdGEubGFzdE5hbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKCFkYXRhLmxhc3ROYW1lPy50cmltKCkpIHtcclxuICAgICAgZXJyb3JzLmxhc3ROYW1lID0gJ0VsIGFwZWxsaWRvIGVzIHJlcXVlcmlkbyc7XHJcbiAgICB9IGVsc2UgaWYgKGRhdGEubGFzdE5hbWUubGVuZ3RoIDwgMikge1xyXG4gICAgICBlcnJvcnMubGFzdE5hbWUgPSAnRWwgYXBlbGxpZG8gZGViZSB0ZW5lciBhbCBtZW5vcyAyIGNhcmFjdGVyZXMnO1xyXG4gICAgfSBlbHNlIGlmIChkYXRhLmxhc3ROYW1lLmxlbmd0aCA+IDUwKSB7XHJcbiAgICAgIGVycm9ycy5sYXN0TmFtZSA9ICdFbCBhcGVsbGlkbyBubyBwdWVkZSBleGNlZGVyIDUwIGNhcmFjdGVyZXMnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhciBiaW9ncmFmw61hXHJcbiAgaWYgKGRhdGEuYmlvICE9PSB1bmRlZmluZWQgJiYgZGF0YS5iaW8ubGVuZ3RoID4gNTAwKSB7XHJcbiAgICBlcnJvcnMuYmlvID0gJ0xhIGJpb2dyYWbDrWEgbm8gcHVlZGUgZXhjZWRlciA1MDAgY2FyYWN0ZXJlcyc7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGFyIHdlYnNpdGVcclxuICBpZiAoZGF0YS53ZWJzaXRlICE9PSB1bmRlZmluZWQgJiYgZGF0YS53ZWJzaXRlKSB7XHJcbiAgICBjb25zdCB1cmxSZWdleCA9IC9eaHR0cHM/OlxcL1xcLy4rXFwuLisvO1xyXG4gICAgaWYgKCF1cmxSZWdleC50ZXN0KGRhdGEud2Vic2l0ZSkpIHtcclxuICAgICAgZXJyb3JzLndlYnNpdGUgPSAnRWwgc2l0aW8gd2ViIGRlYmUgc2VyIHVuYSBVUkwgdsOhbGlkYSc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGFyIHRlbMOpZm9ub1xyXG4gIGlmIChkYXRhLnBob25lICE9PSB1bmRlZmluZWQgJiYgZGF0YS5waG9uZSkge1xyXG4gICAgY29uc3QgcGhvbmVSZWdleCA9IC9eXFwrP1tcXGRcXHMtKCldezgsMTV9JC87XHJcbiAgICBpZiAoIXBob25lUmVnZXgudGVzdChkYXRhLnBob25lKSkge1xyXG4gICAgICBlcnJvcnMucGhvbmUgPSAnRWwgdGVsw6lmb25vIGRlYmUgdGVuZXIgdW4gZm9ybWF0byB2w6FsaWRvJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXIgcmVkZXMgc29jaWFsZXNcclxuICBpZiAoZGF0YS5zb2NpYWxMaW5rcykge1xyXG4gICAgY29uc3QgdXJsUmVnZXggPSAvXmh0dHBzPzpcXC9cXC8uKy87XHJcbiAgICBcclxuICAgIGlmIChkYXRhLnNvY2lhbExpbmtzLnR3aXR0ZXIgJiYgIXVybFJlZ2V4LnRlc3QoZGF0YS5zb2NpYWxMaW5rcy50d2l0dGVyKSkge1xyXG4gICAgICBlcnJvcnNbJ3NvY2lhbExpbmtzLnR3aXR0ZXInXSA9ICdMYSBVUkwgZGUgVHdpdHRlciBkZWJlIHNlciB2w6FsaWRhJztcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGRhdGEuc29jaWFsTGlua3MuZmFjZWJvb2sgJiYgIXVybFJlZ2V4LnRlc3QoZGF0YS5zb2NpYWxMaW5rcy5mYWNlYm9vaykpIHtcclxuICAgICAgZXJyb3JzWydzb2NpYWxMaW5rcy5mYWNlYm9vayddID0gJ0xhIFVSTCBkZSBGYWNlYm9vayBkZWJlIHNlciB2w6FsaWRhJztcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGRhdGEuc29jaWFsTGlua3MuaW5zdGFncmFtICYmICF1cmxSZWdleC50ZXN0KGRhdGEuc29jaWFsTGlua3MuaW5zdGFncmFtKSkge1xyXG4gICAgICBlcnJvcnNbJ3NvY2lhbExpbmtzLmluc3RhZ3JhbSddID0gJ0xhIFVSTCBkZSBJbnN0YWdyYW0gZGViZSBzZXIgdsOhbGlkYSc7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChkYXRhLnNvY2lhbExpbmtzLmxpbmtlZGluICYmICF1cmxSZWdleC50ZXN0KGRhdGEuc29jaWFsTGlua3MubGlua2VkaW4pKSB7XHJcbiAgICAgIGVycm9yc1snc29jaWFsTGlua3MubGlua2VkaW4nXSA9ICdMYSBVUkwgZGUgTGlua2VkSW4gZGViZSBzZXIgdsOhbGlkYSc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaXNWYWxpZDogT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPT09IDAsXHJcbiAgICBlcnJvcnMsXHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBURVNUU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5kZXNjcmliZSgnVmFsaWRhY2nDs24gZGUgRm9ybXVsYXJpb3MgZGUgRXZlbnRvcycsICgpID0+IHtcclxuICBjb25zdCB2YWxpZEV2ZW50RGF0YTogQ3JlYXRlRXZlbnREYXRhID0ge1xyXG4gICAgdGl0bGU6ICdFdmVudG8gZGUgUHJ1ZWJhJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnRXN0YSBlcyB1bmEgZGVzY3JpcGNpw7NuIHbDoWxpZGEgY29uIG3DoXMgZGUgMjAgY2FyYWN0ZXJlcycsXHJcbiAgICBzdGFydERhdGU6ICcyMDI1LTEyLTMxVDIwOjAwOjAwWicsXHJcbiAgICBsb2NhdGlvbjogJ1NhbnRpYWdvLCBDaGlsZScsXHJcbiAgICBjYXRlZ29yeUlkOiAnbXVzaWMnLFxyXG4gICAgdGlja2V0VHlwZXM6IFtcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6ICdHZW5lcmFsJyxcclxuICAgICAgICBwcmljZTogMjUwMDAsXHJcbiAgICAgICAgY2FwYWNpdHk6IDEwMCxcclxuICAgICAgICBjdXJyZW5jeTogJ0NMUCcsXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gIH07XHJcblxyXG4gIGl0KCd2YWxpZGEgdW4gZXZlbnRvIGNvcnJlY3RvJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVFdmVudEZvcm0odmFsaWRFdmVudERhdGEpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKHRydWUpO1xyXG4gICAgZXhwZWN0KE9iamVjdC5rZXlzKHJlc3VsdC5lcnJvcnMpKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZWNoYXphIHTDrXR1bG8gdmFjw61vJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVFdmVudEZvcm0oeyAuLi52YWxpZEV2ZW50RGF0YSwgdGl0bGU6ICcnIH0pO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnRpdGxlKS50b0JlKCdFbCB0w610dWxvIGVzIHJlcXVlcmlkbycpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgncmVjaGF6YSB0w610dWxvIG11eSBjb3J0bycsICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlRXZlbnRGb3JtKHsgLi4udmFsaWRFdmVudERhdGEsIHRpdGxlOiAnSGknIH0pO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnRpdGxlKS50b0JlKCdFbCB0w610dWxvIGRlYmUgdGVuZXIgYWwgbWVub3MgNSBjYXJhY3RlcmVzJyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZWNoYXphIGRlc2NyaXBjacOzbiBtdXkgY29ydGEnLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUV2ZW50Rm9ybSh7IC4uLnZhbGlkRXZlbnREYXRhLCBkZXNjcmlwdGlvbjogJ0NvcnRvJyB9KTtcclxuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmVycm9ycy5kZXNjcmlwdGlvbikudG9CZSgnTGEgZGVzY3JpcGNpw7NuIGRlYmUgdGVuZXIgYWwgbWVub3MgMjAgY2FyYWN0ZXJlcycpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgncmVjaGF6YSBmZWNoYSBkZSBpbmljaW8gZW4gZWwgcGFzYWRvJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVFdmVudEZvcm0oeyBcclxuICAgICAgLi4udmFsaWRFdmVudERhdGEsIFxyXG4gICAgICBzdGFydERhdGU6ICcyMDIwLTAxLTAxVDIwOjAwOjAwWicgXHJcbiAgICB9KTtcclxuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmVycm9ycy5zdGFydERhdGUpLnRvQmUoJ0xhIGZlY2hhIGRlIGluaWNpbyBkZWJlIHNlciBmdXR1cmEnKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3JlY2hhemEgZmVjaGEgZGUgZmluIGFudGVyaW9yIGEgZmVjaGEgZGUgaW5pY2lvJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVFdmVudEZvcm0oeyBcclxuICAgICAgLi4udmFsaWRFdmVudERhdGEsXHJcbiAgICAgIHN0YXJ0RGF0ZTogJzIwMjUtMTItMzFUMjA6MDA6MDBaJyxcclxuICAgICAgZW5kRGF0ZTogJzIwMjUtMTItMzFUMTk6MDA6MDBaJ1xyXG4gICAgfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuZW5kRGF0ZSkudG9CZSgnTGEgZmVjaGEgZGUgZmluIGRlYmUgc2VyIHBvc3RlcmlvciBhIGxhIGZlY2hhIGRlIGluaWNpbycpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgncmVjaGF6YSBldmVudG9zIHNpbiB0aXBvcyBkZSB0aWNrZXQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUV2ZW50Rm9ybSh7IC4uLnZhbGlkRXZlbnREYXRhLCB0aWNrZXRUeXBlczogW10gfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMudGlja2V0VHlwZXMpLnRvQmUoJ0RlYmUgYWdyZWdhciBhbCBtZW5vcyB1biB0aXBvIGRlIHRpY2tldCcpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgndmFsaWRhIG3Dumx0aXBsZXMgZXJyb3JlcyBzaW11bHTDoW5lYW1lbnRlJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVFdmVudEZvcm0oe1xyXG4gICAgICB0aXRsZTogJycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29ydG8nLFxyXG4gICAgICBzdGFydERhdGU6ICcnLFxyXG4gICAgICBsb2NhdGlvbjogJycsXHJcbiAgICAgIGNhdGVnb3J5SWQ6ICcnLFxyXG4gICAgICB0aWNrZXRUeXBlczogW10sXHJcbiAgICB9KTtcclxuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QoT2JqZWN0LmtleXMocmVzdWx0LmVycm9ycykpLnRvSGF2ZUxlbmd0aCg2KTtcclxuICB9KTtcclxufSk7XHJcblxyXG5kZXNjcmliZSgnVmFsaWRhY2nDs24gZGUgRm9ybXVsYXJpb3MgZGUgQ8OzZGlnb3MgUHJvbW9jaW9uYWxlcycsICgpID0+IHtcclxuICBjb25zdCB2YWxpZFByb21vRGF0YTogQ3JlYXRlUHJvbW9Db2RlRGF0YSA9IHtcclxuICAgIGNvZGU6ICdTVU1NRVIyMDI0JyxcclxuICAgIG5hbWU6ICdEZXNjdWVudG8gZGUgVmVyYW5vJyxcclxuICAgIHR5cGU6ICdQRVJDRU5UQUdFJyxcclxuICAgIHZhbHVlOiAyMCxcclxuICAgIHZhbGlkRnJvbTogJzIwMjQtMDEtMDEnLFxyXG4gIH07XHJcblxyXG4gIGl0KCd2YWxpZGEgdW4gY8OzZGlnbyBwcm9tb2Npb25hbCBjb3JyZWN0bycsICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUHJvbW9Db2RlRm9ybSh2YWxpZFByb21vRGF0YSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgICBleHBlY3QoT2JqZWN0LmtleXMocmVzdWx0LmVycm9ycykpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3JlY2hhemEgY8OzZGlnbyB2YWPDrW8nLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVByb21vQ29kZUZvcm0oeyAuLi52YWxpZFByb21vRGF0YSwgY29kZTogJycgfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuY29kZSkudG9CZSgnRWwgY8OzZGlnbyBlcyByZXF1ZXJpZG8nKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3JlY2hhemEgY8OzZGlnbyBjb24gY2FyYWN0ZXJlcyBpbnbDoWxpZG9zJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQcm9tb0NvZGVGb3JtKHsgLi4udmFsaWRQcm9tb0RhdGEsIGNvZGU6ICdzdW1tZXItMjAyNCcgfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuY29kZSkudG9CZSgnRWwgY8OzZGlnbyBzb2xvIHB1ZWRlIGNvbnRlbmVyIGxldHJhcyBtYXnDunNjdWxhcyB5IG7Dum1lcm9zJyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZWNoYXphIHBvcmNlbnRhamUgbWF5b3IgYSAxMDAnLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVByb21vQ29kZUZvcm0oeyBcclxuICAgICAgLi4udmFsaWRQcm9tb0RhdGEsIFxyXG4gICAgICB0eXBlOiAnUEVSQ0VOVEFHRScsXHJcbiAgICAgIHZhbHVlOiAxNTAgXHJcbiAgICB9KTtcclxuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmVycm9ycy52YWx1ZSkudG9CZSgnRWwgcG9yY2VudGFqZSBubyBwdWVkZSBzZXIgbWF5b3IgYSAxMDAlJyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZWNoYXphIG1vbnRvIGZpam8gbXV5IGFsdG8nLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVByb21vQ29kZUZvcm0oeyBcclxuICAgICAgLi4udmFsaWRQcm9tb0RhdGEsIFxyXG4gICAgICB0eXBlOiAnRklYRURfQU1PVU5UJyxcclxuICAgICAgdmFsdWU6IDIwMDAwMDAgXHJcbiAgICB9KTtcclxuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmVycm9ycy52YWx1ZSkudG9CZSgnRWwgbW9udG8gZmlqbyBubyBwdWVkZSBleGNlZGVyICQxLDAwMCwwMDAnKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3ZhbGlkYSBmZWNoYXMgY29ycmVjdGFtZW50ZScsICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUHJvbW9Db2RlRm9ybSh7IFxyXG4gICAgICAuLi52YWxpZFByb21vRGF0YSxcclxuICAgICAgdmFsaWRGcm9tOiAnMjAyNC0xMi0zMScsXHJcbiAgICAgIHZhbGlkVW50aWw6ICcyMDI0LTAxLTAxJ1xyXG4gICAgfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMudmFsaWRVbnRpbCkudG9CZSgnTGEgZmVjaGEgZGUgZmluIGRlYmUgc2VyIHBvc3RlcmlvciBhIGxhIGZlY2hhIGRlIGluaWNpbycpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmRlc2NyaWJlKCdWYWxpZGFjacOzbiBkZSBGb3JtdWxhcmlvcyBkZSBQZXJmaWwgZGUgVXN1YXJpbycsICgpID0+IHtcclxuICBjb25zdCB2YWxpZFByb2ZpbGVEYXRhOiBVcGRhdGVVc2VyUHJvZmlsZURhdGEgPSB7XHJcbiAgICBmaXJzdE5hbWU6ICdKdWFuJyxcclxuICAgIGxhc3ROYW1lOiAnUMOpcmV6JyxcclxuICAgIGJpbzogJ0Rlc2Fycm9sbGFkb3IgYXBhc2lvbmFkbyBwb3IgbGEgdGVjbm9sb2fDrWEnLFxyXG4gICAgd2Vic2l0ZTogJ2h0dHBzOi8vanVhbnBlcmV6LmRldicsXHJcbiAgICBwaG9uZTogJys1NjkxMjM0NTY3OCcsXHJcbiAgICBzb2NpYWxMaW5rczoge1xyXG4gICAgICB0d2l0dGVyOiAnaHR0cHM6Ly90d2l0dGVyLmNvbS9qdWFucGVyZXonLFxyXG4gICAgICBsaW5rZWRpbjogJ2h0dHBzOi8vbGlua2VkaW4uY29tL2luL2p1YW5wZXJleicsXHJcbiAgICB9LFxyXG4gIH07XHJcblxyXG4gIGl0KCd2YWxpZGEgdW4gcGVyZmlsIGNvcnJlY3RvJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVVc2VyUHJvZmlsZUZvcm0odmFsaWRQcm9maWxlRGF0YSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgICBleHBlY3QoT2JqZWN0LmtleXMocmVzdWx0LmVycm9ycykpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3JlY2hhemEgbm9tYnJlIG11eSBjb3J0bycsICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlVXNlclByb2ZpbGVGb3JtKHsgLi4udmFsaWRQcm9maWxlRGF0YSwgZmlyc3ROYW1lOiAnSicgfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuZmlyc3ROYW1lKS50b0JlKCdFbCBub21icmUgZGViZSB0ZW5lciBhbCBtZW5vcyAyIGNhcmFjdGVyZXMnKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3JlY2hhemEgYmlvZ3JhZsOtYSBtdXkgbGFyZ2EnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBsb25nQmlvID0gJ0EnLnJlcGVhdCg1MDEpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVVc2VyUHJvZmlsZUZvcm0oeyAuLi52YWxpZFByb2ZpbGVEYXRhLCBiaW86IGxvbmdCaW8gfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuYmlvKS50b0JlKCdMYSBiaW9ncmFmw61hIG5vIHB1ZWRlIGV4Y2VkZXIgNTAwIGNhcmFjdGVyZXMnKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3JlY2hhemEgVVJMIGRlIHdlYnNpdGUgaW52w6FsaWRhJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVVc2VyUHJvZmlsZUZvcm0oeyAuLi52YWxpZFByb2ZpbGVEYXRhLCB3ZWJzaXRlOiAnbm90LWEtdXJsJyB9KTtcclxuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmVycm9ycy53ZWJzaXRlKS50b0JlKCdFbCBzaXRpbyB3ZWIgZGViZSBzZXIgdW5hIFVSTCB2w6FsaWRhJyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZWNoYXphIHRlbMOpZm9ubyBpbnbDoWxpZG8nLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVVzZXJQcm9maWxlRm9ybSh7IC4uLnZhbGlkUHJvZmlsZURhdGEsIHBob25lOiAnMTIzJyB9KTtcclxuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmVycm9ycy5waG9uZSkudG9CZSgnRWwgdGVsw6lmb25vIGRlYmUgdGVuZXIgdW4gZm9ybWF0byB2w6FsaWRvJyk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCd2YWxpZGEgVVJMcyBkZSByZWRlcyBzb2NpYWxlcycsICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlVXNlclByb2ZpbGVGb3JtKHsgXHJcbiAgICAgIC4uLnZhbGlkUHJvZmlsZURhdGEsIFxyXG4gICAgICBzb2NpYWxMaW5rczoge1xyXG4gICAgICAgIHR3aXR0ZXI6ICdub3QtYS11cmwnLFxyXG4gICAgICAgIGxpbmtlZGluOiAnaHR0cHM6Ly9saW5rZWRpbi5jb20vdmFsaWQnLFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmVycm9yc1snc29jaWFsTGlua3MudHdpdHRlciddKS50b0JlKCdMYSBVUkwgZGUgVHdpdHRlciBkZWJlIHNlciB2w6FsaWRhJyk7XHJcbiAgICBleHBlY3QocmVzdWx0LmVycm9yc1snc29jaWFsTGlua3MubGlua2VkaW4nXSkudG9CZVVuZGVmaW5lZCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgncGVybWl0ZSBjYW1wb3Mgb3BjaW9uYWxlcyB2YWPDrW9zJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVVc2VyUHJvZmlsZUZvcm0oe1xyXG4gICAgICBmaXJzdE5hbWU6ICdKdWFuJyxcclxuICAgICAgbGFzdE5hbWU6ICdQw6lyZXonLFxyXG4gICAgfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCd2YWxpZGEgbcO6bHRpcGxlcyByZWRlcyBzb2NpYWxlcyBpbnbDoWxpZGFzJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVVc2VyUHJvZmlsZUZvcm0oeyBcclxuICAgICAgLi4udmFsaWRQcm9maWxlRGF0YSwgXHJcbiAgICAgIHNvY2lhbExpbmtzOiB7XHJcbiAgICAgICAgdHdpdHRlcjogJ2ludmFsaWQtdHdpdHRlcicsXHJcbiAgICAgICAgZmFjZWJvb2s6ICdpbnZhbGlkLWZhY2Vib29rJyxcclxuICAgICAgICBpbnN0YWdyYW06ICdpbnZhbGlkLWluc3RhZ3JhbScsXHJcbiAgICAgICAgbGlua2VkaW46ICdpbnZhbGlkLWxpbmtlZGluJyxcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KE9iamVjdC5rZXlzKHJlc3VsdC5lcnJvcnMpKS50b0hhdmVMZW5ndGgoNCk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=