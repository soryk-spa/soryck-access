667b57ab427a56f22af491cb2527d139
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseTimeToMinutes = parseTimeToMinutes;
exports.getCourtesyPrice = getCourtesyPrice;
function parseTimeToMinutes(time) {
    const m = /^([01]?\d|2[0-3]):([0-5]\d)$/.exec(time);
    if (!m)
        return null;
    return parseInt(m[1], 10) * 60 + parseInt(m[2], 10);
}
function getCourtesyPrice(now, cfg) {
    if (!cfg.enabled)
        return null;
    const nowMin = parseTimeToMinutes(now);
    if (nowMin == null)
        return null;
    const untilMin = cfg.validUntil ? parseTimeToMinutes(cfg.validUntil) : null;
    if (untilMin != null && nowMin <= untilMin)
        return 'free';
    return typeof cfg.priceAfter === 'number' ? cfg.priceAfter : null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxCaWx1clxcRG9jdW1lbnRzXFxEZXZlbG9wbWVudFxcTmV4dFxcc29yeWNrLWFjY2Vzc1xcc3JjXFxsaWJcXGNvdXJ0ZXN5LnRzIiwibWFwcGluZ3MiOiI7O0FBTUEsZ0RBSUM7QUFFRCw0Q0FRQztBQWRELFNBQWdCLGtCQUFrQixDQUFDLElBQVk7SUFDN0MsTUFBTSxDQUFDLEdBQUcsOEJBQThCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BELElBQUksQ0FBQyxDQUFDO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDcEIsT0FBTyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3RELENBQUM7QUFFRCxTQUFnQixnQkFBZ0IsQ0FBQyxHQUFXLEVBQUUsR0FBbUI7SUFDL0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDOUIsTUFBTSxNQUFNLEdBQUcsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkMsSUFBSSxNQUFNLElBQUksSUFBSTtRQUFFLE9BQU8sSUFBSSxDQUFDO0lBQ2hDLE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBRTVFLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxNQUFNLElBQUksUUFBUTtRQUFFLE9BQU8sTUFBTSxDQUFDO0lBQzFELE9BQU8sT0FBTyxHQUFHLENBQUMsVUFBVSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3BFLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCaWx1clxcRG9jdW1lbnRzXFxEZXZlbG9wbWVudFxcTmV4dFxcc29yeWNrLWFjY2Vzc1xcc3JjXFxsaWJcXGNvdXJ0ZXN5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIENvdXJ0ZXN5Q29uZmlnID0ge1xyXG4gIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgdmFsaWRVbnRpbD86IHN0cmluZyB8IG51bGw7IC8vIEhIOm1tIDI0aFxyXG4gIHByaWNlQWZ0ZXI/OiBudW1iZXIgfCBudWxsO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVGltZVRvTWludXRlcyh0aW1lOiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcclxuICBjb25zdCBtID0gL14oWzAxXT9cXGR8MlswLTNdKTooWzAtNV1cXGQpJC8uZXhlYyh0aW1lKTtcclxuICBpZiAoIW0pIHJldHVybiBudWxsO1xyXG4gIHJldHVybiBwYXJzZUludChtWzFdLCAxMCkgKiA2MCArIHBhcnNlSW50KG1bMl0sIDEwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvdXJ0ZXN5UHJpY2Uobm93OiBzdHJpbmcsIGNmZzogQ291cnRlc3lDb25maWcpOiBudW1iZXIgfCAnZnJlZScgfCBudWxsIHtcclxuICBpZiAoIWNmZy5lbmFibGVkKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCBub3dNaW4gPSBwYXJzZVRpbWVUb01pbnV0ZXMobm93KTtcclxuICBpZiAobm93TWluID09IG51bGwpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IHVudGlsTWluID0gY2ZnLnZhbGlkVW50aWwgPyBwYXJzZVRpbWVUb01pbnV0ZXMoY2ZnLnZhbGlkVW50aWwpIDogbnVsbDtcclxuXHJcbiAgaWYgKHVudGlsTWluICE9IG51bGwgJiYgbm93TWluIDw9IHVudGlsTWluKSByZXR1cm4gJ2ZyZWUnO1xyXG4gIHJldHVybiB0eXBlb2YgY2ZnLnByaWNlQWZ0ZXIgPT09ICdudW1iZXInID8gY2ZnLnByaWNlQWZ0ZXIgOiBudWxsO1xyXG59XHJcbiJdLCJ2ZXJzaW9uIjozfQ==