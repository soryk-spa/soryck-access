ae2586b0e7b5aad75bd5b9d7b41773da
"use strict";
'use client';
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = CourtesyInvitationsManagement;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const button_1 = require("@/components/ui/button");
const dialog_1 = require("@/components/ui/dialog");
const table_1 = require("@/components/ui/table");
const dropdown_menu_1 = require("@/components/ui/dropdown-menu");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const textarea_1 = require("@/components/ui/textarea");
const badge_1 = require("@/components/ui/badge");
const sonner_1 = require("sonner");
const lucide_react_1 = require("lucide-react");
const date_utils_1 = require("@/lib/date-utils");
function CourtesyInvitationsManagement({ eventId, eventTitle, }) {
    const [invitations, setInvitations] = (0, react_1.useState)([]);
    const [loading, setLoading] = (0, react_1.useState)(true);
    const [isAddingInvitation, setIsAddingInvitation] = (0, react_1.useState)(false);
    const [isBulkModalOpen, setIsBulkModalOpen] = (0, react_1.useState)(false);
    const [singleEmail, setSingleEmail] = (0, react_1.useState)('');
    const [singleName, setSingleName] = (0, react_1.useState)('');
    const [bulkEmails, setBulkEmails] = (0, react_1.useState)('');
    const fetchInvitations = (0, react_1.useCallback)(async () => {
        try {
            const response = await fetch(`/api/events/${eventId}/invitations`);
            if (response.ok) {
                const data = await response.json();
                if (data.invitations && Array.isArray(data.invitations)) {
                    setInvitations(data.invitations);
                }
                else {
                    console.error('La respuesta de la API no contiene invitaciones como array:', data);
                    setInvitations([]);
                    sonner_1.toast.error('Error en el formato de datos de invitaciones');
                }
            }
            else {
                const errorData = await response.json();
                console.error('Error response:', errorData);
                throw new Error(errorData.error || 'Error al cargar invitaciones');
            }
        }
        catch (error) {
            console.error('Error fetching invitations:', error);
            sonner_1.toast.error('Error al cargar las invitaciones');
            setInvitations([]);
        }
        finally {
            setLoading(false);
        }
    }, [eventId]);
    (0, react_1.useEffect)(() => {
        fetchInvitations();
    }, [fetchInvitations]);
    const addSingleInvitation = async () => {
        if (!singleEmail.trim()) {
            sonner_1.toast.error('El email es requerido');
            return;
        }
        setIsAddingInvitation(true);
        try {
            const response = await fetch(`/api/events/${eventId}/invitations`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    invitedEmail: singleEmail.trim(),
                    invitedName: singleName.trim() || undefined,
                }),
            });
            if (response.ok) {
                const newInvitation = await response.json();
                setInvitations(prev => [newInvitation, ...prev]);
                setSingleEmail('');
                setSingleName('');
                sonner_1.toast.success('Invitación creada exitosamente');
            }
            else {
                const error = await response.json();
                sonner_1.toast.error(error.error || 'Error al crear la invitación');
            }
        }
        catch (error) {
            console.error('Error adding invitation:', error);
            sonner_1.toast.error('Error al crear la invitación');
        }
        finally {
            setIsAddingInvitation(false);
        }
    };
    const addBulkInvitations = async () => {
        var _a;
        if (!bulkEmails.trim()) {
            sonner_1.toast.error('Debes agregar al menos un email');
            return;
        }
        const emails = bulkEmails
            .split('\\n')
            .map(line => line.trim())
            .filter(line => line.includes('@'))
            .map(line => {
            var _a;
            const parts = line.split(',');
            return {
                email: parts[0].trim(),
                name: ((_a = parts[1]) === null || _a === void 0 ? void 0 : _a.trim()) || undefined,
            };
        });
        if (emails.length === 0) {
            sonner_1.toast.error('No se encontraron emails válidos');
            return;
        }
        if (emails.length > 50) {
            sonner_1.toast.error('Máximo 50 invitaciones por lote');
            return;
        }
        try {
            const response = await fetch(`/api/events/${eventId}/invitations`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ invitations: emails }),
            });
            if (response.ok) {
                const result = await response.json();
                setInvitations(prev => [...result.created, ...prev]);
                setBulkEmails('');
                setIsBulkModalOpen(false);
                sonner_1.toast.success(`${result.created.length} invitaciones creadas exitosamente`);
                if (((_a = result.errors) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                    sonner_1.toast.warning(`${result.errors.length} invitaciones fallaron`);
                }
            }
            else {
                const error = await response.json();
                sonner_1.toast.error(error.error || 'Error al crear las invitaciones');
            }
        }
        catch (error) {
            console.error('Error adding bulk invitations:', error);
            sonner_1.toast.error('Error al crear las invitaciones');
        }
    };
    const handleInvitationAction = async (invitationId, action) => {
        try {
            const response = await fetch(`/api/events/${eventId}/invitations/${invitationId}`, {
                method: 'PATCH',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action }),
            });
            if (response.ok) {
                const updatedInvitation = await response.json();
                setInvitations(prev => prev.map(inv => inv.id === invitationId ? updatedInvitation : inv));
                const messages = {
                    SEND: 'Invitación enviada exitosamente',
                    RESEND: 'Invitación reenviada exitosamente',
                    GENERATE_TICKET: 'Ticket generado exitosamente',
                    CANCEL: 'Invitación cancelada',
                };
                sonner_1.toast.success(messages[action] || 'Acción completada');
            }
            else {
                const error = await response.json();
                sonner_1.toast.error(error.error || 'Error al procesar la acción');
            }
        }
        catch (error) {
            console.error('Error handling invitation action:', error);
            sonner_1.toast.error('Error al procesar la acción');
        }
    };
    const deleteInvitation = async (invitationId) => {
        if (!confirm('¿Estás seguro de eliminar esta invitación?'))
            return;
        try {
            const response = await fetch(`/api/events/${eventId}/invitations/${invitationId}`, {
                method: 'DELETE',
            });
            if (response.ok) {
                setInvitations(prev => prev.filter(inv => inv.id !== invitationId));
                sonner_1.toast.success('Invitación eliminada exitosamente');
            }
            else {
                const error = await response.json();
                sonner_1.toast.error(error.error || 'Error al eliminar la invitación');
            }
        }
        catch (error) {
            console.error('Error deleting invitation:', error);
            sonner_1.toast.error('Error al eliminar la invitación');
        }
    };
    const getStatusBadge = (invitation) => {
        switch (invitation.status) {
            case 'PENDING':
                return (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: "secondary", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: "w-3 h-3 mr-1" }), "Pendiente"] });
            case 'SENT':
                return (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: "default", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Mail, { className: "w-3 h-3 mr-1" }), "Enviada"] });
            case 'ACCEPTED':
                return (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: "default", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.CheckCircle, { className: "w-3 h-3 mr-1" }), "Aceptada"] });
            case 'EXPIRED':
                return (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: "destructive", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.XCircle, { className: "w-3 h-3 mr-1" }), "Expirada"] });
            default:
                return (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "secondary", children: "Desconocido" });
        }
    };
    const exportInvitations = () => {
        const csvContent = [
            ['Email', 'Nombre', 'Estado', 'Enviado', 'Aceptado', 'QR Code', 'Usado'],
            ...invitations.map(inv => {
                var _a, _b;
                return [
                    inv.invitedEmail,
                    inv.invitedName || '',
                    inv.status,
                    inv.sentAt ? (0, date_utils_1.formatFullDateTime)(inv.sentAt) : '',
                    inv.acceptedAt ? (0, date_utils_1.formatFullDateTime)(inv.acceptedAt) : '',
                    ((_a = inv.ticket) === null || _a === void 0 ? void 0 : _a.qrCode) || '',
                    ((_b = inv.ticket) === null || _b === void 0 ? void 0 : _b.isUsed) ? 'Sí' : 'No',
                ];
            })
        ].map(row => row.join(',')).join('\\n');
        const blob = new Blob([csvContent], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `invitaciones-${eventTitle.replace(/[^a-zA-Z0-9]/g, '-')}.csv`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
    };
    if (loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center p-8", children: (0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary" }) }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold", children: "Invitaciones de Cortes\u00EDa" }), (0, jsx_runtime_1.jsxs)("p", { className: "text-muted-foreground", children: ["Gestiona las invitaciones gratuitas para ", eventTitle] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", onClick: exportInvitations, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Download, { className: "w-4 h-4 mr-2" }), "Exportar"] }), (0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: isBulkModalOpen, onOpenChange: setIsBulkModalOpen, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "w-4 h-4 mr-2" }), "Invitaci\u00F3n Masiva"] }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: "max-w-2xl", children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Invitaci\u00F3n Masiva" }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: "Agrega m\u00FAltiples emails separados por l\u00EDneas. Formato: email@ejemplo.com, Nombre (opcional)" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: "bulk-emails", children: "Emails (m\u00E1ximo 50)" }), (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { id: "bulk-emails", placeholder: "usuario1@ejemplo.com, Juan P\u00E9rez\nusuario2@ejemplo.com\nusuario3@ejemplo.com, Mar\u00EDa Garc\u00EDa", value: bulkEmails, onChange: (e) => setBulkEmails(e.target.value), rows: 10 })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-end gap-2", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: "outline", onClick: () => setIsBulkModalOpen(false), children: "Cancelar" }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: addBulkInvitations, children: "Crear Invitaciones" })] })] })] })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-card rounded-lg border p-6", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-semibold mb-4", children: "Agregar Invitaci\u00F3n Individual" }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: "email", children: "Email *" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: "email", type: "email", placeholder: "usuario@ejemplo.com", value: singleEmail, onChange: (e) => setSingleEmail(e.target.value) })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: "name", children: "Nombre (opcional)" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: "name", placeholder: "Nombre del invitado", value: singleName, onChange: (e) => setSingleName(e.target.value) })] }), (0, jsx_runtime_1.jsx)("div", { className: "flex items-end", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: addSingleInvitation, disabled: isAddingInvitation || !singleEmail.trim(), className: "w-full", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: "w-4 h-4 mr-2" }), isAddingInvitation ? 'Agregando...' : 'Agregar Invitación'] }) })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "bg-card rounded-lg border", children: [(0, jsx_runtime_1.jsx)("div", { className: "p-6 border-b", children: (0, jsx_runtime_1.jsxs)("h3", { className: "text-lg font-semibold", children: ["Invitaciones (", invitations.length, ")"] }) }), invitations.length === 0 ? ((0, jsx_runtime_1.jsxs)("div", { className: "p-8 text-center text-muted-foreground", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "w-12 h-12 mx-auto mb-4 opacity-50" }), (0, jsx_runtime_1.jsx)("p", { children: "No hay invitaciones creadas para este evento" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm", children: "Agrega tu primera invitaci\u00F3n arriba" })] })) : ((0, jsx_runtime_1.jsxs)(table_1.Table, { children: [(0, jsx_runtime_1.jsx)(table_1.TableHeader, { children: (0, jsx_runtime_1.jsxs)(table_1.TableRow, { children: [(0, jsx_runtime_1.jsx)(table_1.TableHead, { children: "Invitado" }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: "Estado" }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: "Fechas" }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: "Ticket" }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: "Creado por" }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { className: "text-right", children: "Acciones" })] }) }), (0, jsx_runtime_1.jsx)(table_1.TableBody, { children: invitations.map((invitation) => {
                                    var _a;
                                    return ((0, jsx_runtime_1.jsxs)(table_1.TableRow, { children: [(0, jsx_runtime_1.jsx)(table_1.TableCell, { children: (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: "font-medium", children: invitation.invitedName || 'Sin nombre' }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-muted-foreground", children: invitation.invitedEmail })] }) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: getStatusBadge(invitation) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: (0, jsx_runtime_1.jsxs)("div", { className: "text-sm", children: [invitation.sentAt && ((0, jsx_runtime_1.jsxs)("div", { children: ["Enviado: ", (0, date_utils_1.formatFullDateTime)(invitation.sentAt)] })), invitation.acceptedAt && ((0, jsx_runtime_1.jsxs)("div", { children: ["Aceptado: ", (0, date_utils_1.formatFullDateTime)(invitation.acceptedAt)] })), invitation.expiresAt && ((0, jsx_runtime_1.jsxs)("div", { children: ["Expira: ", (0, date_utils_1.formatFullDateTime)(invitation.expiresAt)] }))] }) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: invitation.ticket ? ((0, jsx_runtime_1.jsxs)("div", { className: "text-sm", children: [(0, jsx_runtime_1.jsx)("div", { className: "font-mono text-xs", children: invitation.ticket.qrCode }), invitation.ticket.isUsed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "secondary", className: "mt-1", children: "Usado" }))] })) : ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", children: "Sin ticket" })) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: (0, jsx_runtime_1.jsx)("div", { className: "text-sm", children: invitation.creator ? (`${invitation.creator.firstName} ${invitation.creator.lastName || ''}`.trim()) : ('Usuario no disponible') }) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { className: "text-right", children: (0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenu, { children: [(0, jsx_runtime_1.jsx)(dropdown_menu_1.DropdownMenuTrigger, { asChild: true, children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "ghost", size: "sm", children: (0, jsx_runtime_1.jsx)(lucide_react_1.MoreHorizontal, { className: "w-4 h-4" }) }) }), (0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuContent, { align: "end", children: [invitation.status === 'PENDING' && ((0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuItem, { onClick: () => handleInvitationAction(invitation.id, 'SEND'), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Send, { className: "w-4 h-4 mr-2" }), "Enviar Invitaci\u00F3n"] })), invitation.status === 'SENT' && ((0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuItem, { onClick: () => handleInvitationAction(invitation.id, 'RESEND'), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Mail, { className: "w-4 h-4 mr-2" }), "Reenviar"] })), !invitation.ticket && ((0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuItem, { onClick: () => handleInvitationAction(invitation.id, 'GENERATE_TICKET'), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: "w-4 h-4 mr-2" }), "Generar Ticket"] })), invitation.status !== 'EXPIRED' && ((0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuItem, { onClick: () => handleInvitationAction(invitation.id, 'CANCEL'), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.XCircle, { className: "w-4 h-4 mr-2" }), "Cancelar"] })), (0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuItem, { onClick: () => deleteInvitation(invitation.id), className: "text-destructive", disabled: (_a = invitation.ticket) === null || _a === void 0 ? void 0 : _a.isUsed, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Trash2, { className: "w-4 h-4 mr-2" }), "Eliminar"] })] })] }) })] }, invitation.id));
                                }) })] }))] })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxCaWx1clxcRG9jdW1lbnRzXFxEZXZlbG9wbWVudFxcTmV4dFxcc29yeWNrLWFjY2Vzc1xcc3JjXFxjb21wb25lbnRzXFxjb3VydGVzeS1pbnZpdGF0aW9ucy1tYW5hZ2VtZW50LnRzeCIsIm1hcHBpbmdzIjoiO0FBQUEsWUFBWSxDQUFDOztBQXdFYixnREF5Y0M7O0FBL2dCRCxpQ0FBeUQ7QUFDekQsbURBQWdEO0FBQ2hELG1EQU9nQztBQUNoQyxpREFPK0I7QUFDL0IsaUVBS3VDO0FBQ3ZDLGlEQUE4QztBQUM5QyxpREFBOEM7QUFDOUMsdURBQW9EO0FBQ3BELGlEQUE4QztBQUM5QyxtQ0FBK0I7QUFDL0IsK0NBV3NCO0FBQ3RCLGlEQUFzRDtBQTZCdEQsU0FBd0IsNkJBQTZCLENBQUMsRUFDcEQsT0FBTyxFQUNQLFVBQVUsR0FDeUI7SUFDbkMsTUFBTSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQXVCLEVBQUUsQ0FBQyxDQUFDO0lBQ3pFLE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdDLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxxQkFBcUIsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxLQUFLLENBQUMsQ0FBQztJQUNwRSxNQUFNLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEtBQUssQ0FBQyxDQUFDO0lBRzlELE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ25ELE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRWpELE1BQU0s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QUNmLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxhQUU5RCx1QkFBQyxtQkFBSSxJQUFDLFNBQVMsRUFBQyxjQUFjLEdBQUcsZ0JBRWhCLENBQ3BCLEVBQ0EsQ0FBQyxVQUFVLENBQUMsTUFBTSxJQUFJLENBQ3JCLHdCQUFDLGdDQUFnQixJQUNmLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLGlCQUFpQixDQUFDLGFBRXZFLHVCQUFDLG1CQUFJLElBQUMsU0FBUyxFQUFDLGNBQWMsR0FBRyxzQkFFaEIsQ0FDcEIsRUFDQSxVQUFVLENBQUMsTUFBTSxLQUFLLFNBQVMsSUFBSSxDQUNsQyx3QkFBQyxnQ0FBZ0IsSUFDZixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsc0JBQXNCLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxRQUFRLENBQUMsYUFFOUQsdUJBQUMsc0JBQU8sSUFBQyxTQUFTLEVBQUMsY0FBYyxHQUFHLGdCQUVuQixDQUNwQixFQUNELHdCQUFDLGdDQUFnQixJQUNmLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQzlDLFNBQVMsRUFBQyxrQkFBa0IsRUFDNUIsUUFBUSxFQUFFLE1BQUEsVUFBVSxDQUFDLE1BQU0sMENBQUUsTUFBTSxhQUVuQyx1QkFBQyxxQkFBTSxJQUFDLFNBQVMsRUFBQyxjQUFjLEdBQUcsZ0JBRWxCLElBQ0MsSUFDVCxHQUNMLEtBOUZDLFVBQVUsQ0FBQyxFQUFFLENBK0ZqQixDQUNaLENBQUE7aUNBQUEsQ0FBQyxHQUNRLElBQ04sQ0FDVCxJQUNHLElBQ0YsQ0FDUCxDQUFDO0FBQ0osQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXEJpbHVyXFxEb2N1bWVudHNcXERldmVsb3BtZW50XFxOZXh0XFxzb3J5Y2stYWNjZXNzXFxzcmNcXGNvbXBvbmVudHNcXGNvdXJ0ZXN5LWludml0YXRpb25zLW1hbmFnZW1lbnQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcclxuaW1wb3J0IHtcclxuICBEaWFsb2csXHJcbiAgRGlhbG9nQ29udGVudCxcclxuICBEaWFsb2dEZXNjcmlwdGlvbixcclxuICBEaWFsb2dIZWFkZXIsXHJcbiAgRGlhbG9nVGl0bGUsXHJcbiAgRGlhbG9nVHJpZ2dlcixcclxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvZGlhbG9nJztcclxuaW1wb3J0IHtcclxuICBUYWJsZSxcclxuICBUYWJsZUJvZHksXHJcbiAgVGFibGVDZWxsLFxyXG4gIFRhYmxlSGVhZCxcclxuICBUYWJsZUhlYWRlcixcclxuICBUYWJsZVJvdyxcclxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGFibGUnO1xyXG5pbXBvcnQge1xyXG4gIERyb3Bkb3duTWVudSxcclxuICBEcm9wZG93bk1lbnVDb250ZW50LFxyXG4gIERyb3Bkb3duTWVudUl0ZW0sXHJcbiAgRHJvcGRvd25NZW51VHJpZ2dlcixcclxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvZHJvcGRvd24tbWVudSc7XHJcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcclxuaW1wb3J0IHsgTGFiZWwgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvbGFiZWwnO1xyXG5pbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS90ZXh0YXJlYSc7XHJcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcclxuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdzb25uZXInO1xyXG5pbXBvcnQge1xyXG4gIE1haWwsXHJcbiAgTW9yZUhvcml6b250YWwsXHJcbiAgUGx1cyxcclxuICBTZW5kLFxyXG4gIFRyYXNoMixcclxuICBVc2VycyxcclxuICBDbG9jayxcclxuICBDaGVja0NpcmNsZSxcclxuICBYQ2lyY2xlLFxyXG4gIERvd25sb2FkLFxyXG59IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcbmltcG9ydCB7IGZvcm1hdEZ1bGxEYXRlVGltZSB9IGZyb20gJ0AvbGliL2RhdGUtdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIENvdXJ0ZXN5SW52aXRhdGlvbiB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBpbnZpdGVkRW1haWw6IHN0cmluZztcclxuICBpbnZpdGVkTmFtZT86IHN0cmluZztcclxuICBzdGF0dXM6ICdQRU5ESU5HJyB8ICdTRU5UJyB8ICdBQ0NFUFRFRCcgfCAnRVhQSVJFRCc7XHJcbiAgc2VudEF0Pzogc3RyaW5nO1xyXG4gIGFjY2VwdGVkQXQ/OiBzdHJpbmc7XHJcbiAgZXhwaXJlc0F0Pzogc3RyaW5nO1xyXG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xyXG4gIHRpY2tldD86IHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBxckNvZGU6IHN0cmluZztcclxuICAgIGlzVXNlZDogYm9vbGVhbjtcclxuICAgIHVzZWRBdD86IHN0cmluZztcclxuICB9O1xyXG4gIGNyZWF0b3I/OiB7XHJcbiAgICBmaXJzdE5hbWU6IHN0cmluZztcclxuICAgIGxhc3ROYW1lPzogc3RyaW5nO1xyXG4gICAgZW1haWw6IHN0cmluZztcclxuICB9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ291cnRlc3lJbnZpdGF0aW9uc01hbmFnZW1lbnRQcm9wcyB7XHJcbiAgZXZlbnRJZDogc3RyaW5nO1xyXG4gIGV2ZW50VGl0bGU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ291cnRlc3lJbnZpdGF0aW9uc01hbmFnZW1lbnQoe1xyXG4gIGV2ZW50SWQsXHJcbiAgZXZlbnRUaXRsZSxcclxufTogQ291cnRlc3lJbnZpdGF0aW9uc01hbmFnZW1lbnRQcm9wcykge1xyXG4gIGNvbnN0IFtpbnZpdGF0aW9ucywgc2V0SW52aXRhdGlvbnNdID0gdXNlU3RhdGU8Q291cnRlc3lJbnZpdGF0aW9uW10+KFtdKTtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuICBjb25zdCBbaXNBZGRpbmdJbnZpdGF0aW9uLCBzZXRJc0FkZGluZ0ludml0YXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtpc0J1bGtNb2RhbE9wZW4sIHNldElzQnVsa01vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIFxyXG4gIGNvbnN0IFtzaW5nbGVFbWFpbCwgc2V0U2luZ2xlRW1haWxdID0gdXNlU3RhdGUoJycpO1xyXG4gIGNvbnN0IFtzaW5nbGVOYW1lLCBzZXRTaW5nbGVOYW1lXSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBbYnVsa0VtYWlscywgc2V0QnVsa0VtYWlsc10gPSB1c2VTdGF0ZSgnJyk7XHJcblxyXG4gIGNvbnN0IGZldGNoSW52aXRhdGlvbnMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2V2ZW50cy8ke2V2ZW50SWR9L2ludml0YXRpb25zYCk7XHJcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRhdGEuaW52aXRhdGlvbnMgJiYgQXJyYXkuaXNBcnJheShkYXRhLmludml0YXRpb25zKSkge1xyXG4gICAgICAgICAgc2V0SW52aXRhdGlvbnMoZGF0YS5pbnZpdGF0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0xhIHJlc3B1ZXN0YSBkZSBsYSBBUEkgbm8gY29udGllbmUgaW52aXRhY2lvbmVzIGNvbW8gYXJyYXk6JywgZGF0YSk7XHJcbiAgICAgICAgICBzZXRJbnZpdGF0aW9ucyhbXSk7XHJcbiAgICAgICAgICB0b2FzdC5lcnJvcignRXJyb3IgZW4gZWwgZm9ybWF0byBkZSBkYXRvcyBkZSBpbnZpdGFjaW9uZXMnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc3BvbnNlOicsIGVycm9yRGF0YSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCAnRXJyb3IgYWwgY2FyZ2FyIGludml0YWNpb25lcycpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBpbnZpdGF0aW9uczonLCBlcnJvcik7XHJcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBhbCBjYXJnYXIgbGFzIGludml0YWNpb25lcycpO1xyXG4gICAgICBzZXRJbnZpdGF0aW9ucyhbXSk7IFxyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW2V2ZW50SWRdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGZldGNoSW52aXRhdGlvbnMoKTtcclxuICB9LCBbZmV0Y2hJbnZpdGF0aW9uc10pO1xyXG5cclxuICBjb25zdCBhZGRTaW5nbGVJbnZpdGF0aW9uID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFzaW5nbGVFbWFpbC50cmltKCkpIHtcclxuICAgICAgdG9hc3QuZXJyb3IoJ0VsIGVtYWlsIGVzIHJlcXVlcmlkbycpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SXNBZGRpbmdJbnZpdGF0aW9uKHRydWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9ldmVudHMvJHtldmVudElkfS9pbnZpdGF0aW9uc2AsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBpbnZpdGVkRW1haWw6IHNpbmdsZUVtYWlsLnRyaW0oKSxcclxuICAgICAgICAgIGludml0ZWROYW1lOiBzaW5nbGVOYW1lLnRyaW0oKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgbmV3SW52aXRhdGlvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBzZXRJbnZpdGF0aW9ucyhwcmV2ID0+IFtuZXdJbnZpdGF0aW9uLCAuLi5wcmV2XSk7XHJcbiAgICAgICAgc2V0U2luZ2xlRW1haWwoJycpO1xyXG4gICAgICAgIHNldFNpbmdsZU5hbWUoJycpO1xyXG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoJ0ludml0YWNpw7NuIGNyZWFkYSBleGl0b3NhbWVudGUnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB0b2FzdC5lcnJvcihlcnJvci5lcnJvciB8fCAnRXJyb3IgYWwgY3JlYXIgbGEgaW52aXRhY2nDs24nKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGludml0YXRpb246JywgZXJyb3IpO1xyXG4gICAgICB0b2FzdC5lcnJvcignRXJyb3IgYWwgY3JlYXIgbGEgaW52aXRhY2nDs24nKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzQWRkaW5nSW52aXRhdGlvbihmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYWRkQnVsa0ludml0YXRpb25zID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFidWxrRW1haWxzLnRyaW0oKSkge1xyXG4gICAgICB0b2FzdC5lcnJvcignRGViZXMgYWdyZWdhciBhbCBtZW5vcyB1biBlbWFpbCcpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZW1haWxzID0gYnVsa0VtYWlsc1xyXG4gICAgICAuc3BsaXQoJ1xcXFxuJylcclxuICAgICAgLm1hcChsaW5lID0+IGxpbmUudHJpbSgpKVxyXG4gICAgICAuZmlsdGVyKGxpbmUgPT4gbGluZS5pbmNsdWRlcygnQCcpKVxyXG4gICAgICAubWFwKGxpbmUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBlbWFpbDogcGFydHNbMF0udHJpbSgpLFxyXG4gICAgICAgICAgbmFtZTogcGFydHNbMV0/LnRyaW0oKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKGVtYWlscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdG9hc3QuZXJyb3IoJ05vIHNlIGVuY29udHJhcm9uIGVtYWlscyB2w6FsaWRvcycpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVtYWlscy5sZW5ndGggPiA1MCkge1xyXG4gICAgICB0b2FzdC5lcnJvcignTcOheGltbyA1MCBpbnZpdGFjaW9uZXMgcG9yIGxvdGUnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZXZlbnRzLyR7ZXZlbnRJZH0vaW52aXRhdGlvbnNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBpbnZpdGF0aW9uczogZW1haWxzIH0pLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBzZXRJbnZpdGF0aW9ucyhwcmV2ID0+IFsuLi5yZXN1bHQuY3JlYXRlZCwgLi4ucHJldl0pO1xyXG4gICAgICAgIHNldEJ1bGtFbWFpbHMoJycpO1xyXG4gICAgICAgIHNldElzQnVsa01vZGFsT3BlbihmYWxzZSk7XHJcbiAgICAgICAgdG9hc3Quc3VjY2VzcyhgJHtyZXN1bHQuY3JlYXRlZC5sZW5ndGh9IGludml0YWNpb25lcyBjcmVhZGFzIGV4aXRvc2FtZW50ZWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChyZXN1bHQuZXJyb3JzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICB0b2FzdC53YXJuaW5nKGAke3Jlc3VsdC5lcnJvcnMubGVuZ3RofSBpbnZpdGFjaW9uZXMgZmFsbGFyb25gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgdG9hc3QuZXJyb3IoZXJyb3IuZXJyb3IgfHwgJ0Vycm9yIGFsIGNyZWFyIGxhcyBpbnZpdGFjaW9uZXMnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGJ1bGsgaW52aXRhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICB0b2FzdC5lcnJvcignRXJyb3IgYWwgY3JlYXIgbGFzIGludml0YWNpb25lcycpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZUludml0YXRpb25BY3Rpb24gPSBhc3luYyAoaW52aXRhdGlvbklkOiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2V2ZW50cy8ke2V2ZW50SWR9L2ludml0YXRpb25zLyR7aW52aXRhdGlvbklkfWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb24gfSksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEludml0YXRpb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgc2V0SW52aXRhdGlvbnMocHJldiA9PiBcclxuICAgICAgICAgIHByZXYubWFwKGludiA9PiBpbnYuaWQgPT09IGludml0YXRpb25JZCA/IHVwZGF0ZWRJbnZpdGF0aW9uIDogaW52KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSB7XHJcbiAgICAgICAgICBTRU5EOiAnSW52aXRhY2nDs24gZW52aWFkYSBleGl0b3NhbWVudGUnLFxyXG4gICAgICAgICAgUkVTRU5EOiAnSW52aXRhY2nDs24gcmVlbnZpYWRhIGV4aXRvc2FtZW50ZScsXHJcbiAgICAgICAgICBHRU5FUkFURV9USUNLRVQ6ICdUaWNrZXQgZ2VuZXJhZG8gZXhpdG9zYW1lbnRlJyxcclxuICAgICAgICAgIENBTkNFTDogJ0ludml0YWNpw7NuIGNhbmNlbGFkYScsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB0b2FzdC5zdWNjZXNzKG1lc3NhZ2VzW2FjdGlvbiBhcyBrZXlvZiB0eXBlb2YgbWVzc2FnZXNdIHx8ICdBY2Npw7NuIGNvbXBsZXRhZGEnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB0b2FzdC5lcnJvcihlcnJvci5lcnJvciB8fCAnRXJyb3IgYWwgcHJvY2VzYXIgbGEgYWNjacOzbicpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoYW5kbGluZyBpbnZpdGF0aW9uIGFjdGlvbjonLCBlcnJvcik7XHJcbiAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBhbCBwcm9jZXNhciBsYSBhY2Npw7NuJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlSW52aXRhdGlvbiA9IGFzeW5jIChpbnZpdGF0aW9uSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKCFjb25maXJtKCfCv0VzdMOhcyBzZWd1cm8gZGUgZWxpbWluYXIgZXN0YSBpbnZpdGFjacOzbj8nKSkgcmV0dXJuO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZXZlbnRzLyR7ZXZlbnRJZH0vaW52aXRhdGlvbnMvJHtpbnZpdGF0aW9uSWR9YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgc2V0SW52aXRhdGlvbnMocHJldiA9PiBwcmV2LmZpbHRlcihpbnYgPT4gaW52LmlkICE9PSBpbnZpdGF0aW9uSWQpKTtcclxuICAgICAgICB0b2FzdC5zdWNjZXNzKCdJbnZpdGFjacOzbiBlbGltaW5hZGEgZXhpdG9zYW1lbnRlJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgdG9hc3QuZXJyb3IoZXJyb3IuZXJyb3IgfHwgJ0Vycm9yIGFsIGVsaW1pbmFyIGxhIGludml0YWNpw7NuJyk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGludml0YXRpb246JywgZXJyb3IpO1xyXG4gICAgICB0b2FzdC5lcnJvcignRXJyb3IgYWwgZWxpbWluYXIgbGEgaW52aXRhY2nDs24nKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRTdGF0dXNCYWRnZSA9IChpbnZpdGF0aW9uOiBDb3VydGVzeUludml0YXRpb24pID0+IHtcclxuICAgIHN3aXRjaCAoaW52aXRhdGlvbi5zdGF0dXMpIHtcclxuICAgICAgY2FzZSAnUEVORElORyc6XHJcbiAgICAgICAgcmV0dXJuIDxCYWRnZSB2YXJpYW50PVwic2Vjb25kYXJ5XCI+PENsb2NrIGNsYXNzTmFtZT1cInctMyBoLTMgbXItMVwiIC8+UGVuZGllbnRlPC9CYWRnZT47XHJcbiAgICAgIGNhc2UgJ1NFTlQnOlxyXG4gICAgICAgIHJldHVybiA8QmFkZ2UgdmFyaWFudD1cImRlZmF1bHRcIj48TWFpbCBjbGFzc05hbWU9XCJ3LTMgaC0zIG1yLTFcIiAvPkVudmlhZGE8L0JhZGdlPjtcclxuICAgICAgY2FzZSAnQUNDRVBURUQnOlxyXG4gICAgICAgIHJldHVybiA8QmFkZ2UgdmFyaWFudD1cImRlZmF1bHRcIj48Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwidy0zIGgtMyBtci0xXCIgLz5BY2VwdGFkYTwvQmFkZ2U+O1xyXG4gICAgICBjYXNlICdFWFBJUkVEJzpcclxuICAgICAgICByZXR1cm4gPEJhZGdlIHZhcmlhbnQ9XCJkZXN0cnVjdGl2ZVwiPjxYQ2lyY2xlIGNsYXNzTmFtZT1cInctMyBoLTMgbXItMVwiIC8+RXhwaXJhZGE8L0JhZGdlPjtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gPEJhZGdlIHZhcmlhbnQ9XCJzZWNvbmRhcnlcIj5EZXNjb25vY2lkbzwvQmFkZ2U+O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGV4cG9ydEludml0YXRpb25zID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY3N2Q29udGVudCA9IFtcclxuICAgICAgWydFbWFpbCcsICdOb21icmUnLCAnRXN0YWRvJywgJ0VudmlhZG8nLCAnQWNlcHRhZG8nLCAnUVIgQ29kZScsICdVc2FkbyddLFxyXG4gICAgICAuLi5pbnZpdGF0aW9ucy5tYXAoaW52ID0+IFtcclxuICAgICAgICBpbnYuaW52aXRlZEVtYWlsLFxyXG4gICAgICAgIGludi5pbnZpdGVkTmFtZSB8fCAnJyxcclxuICAgICAgICBpbnYuc3RhdHVzLFxyXG4gICAgICAgIGludi5zZW50QXQgPyBmb3JtYXRGdWxsRGF0ZVRpbWUoaW52LnNlbnRBdCkgOiAnJyxcclxuICAgICAgICBpbnYuYWNjZXB0ZWRBdCA/IGZvcm1hdEZ1bGxEYXRlVGltZShpbnYuYWNjZXB0ZWRBdCkgOiAnJyxcclxuICAgICAgICBpbnYudGlja2V0Py5xckNvZGUgfHwgJycsXHJcbiAgICAgICAgaW52LnRpY2tldD8uaXNVc2VkID8gJ1PDrScgOiAnTm8nLFxyXG4gICAgICBdKVxyXG4gICAgXS5tYXAocm93ID0+IHJvdy5qb2luKCcsJykpLmpvaW4oJ1xcXFxuJyk7XHJcblxyXG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjc3ZDb250ZW50XSwgeyB0eXBlOiAndGV4dC9jc3YnIH0pO1xyXG4gICAgY29uc3QgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgYS5ocmVmID0gdXJsO1xyXG4gICAgYS5kb3dubG9hZCA9IGBpbnZpdGFjaW9uZXMtJHtldmVudFRpdGxlLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnLScpfS5jc3ZgO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcclxuICAgIGEuY2xpY2soKTtcclxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7XHJcbiAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gIH07XHJcblxyXG4gIGlmIChsb2FkaW5nKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtOFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLXByaW1hcnlcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XHJcbiAgICAgIHt9XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGRcIj5JbnZpdGFjaW9uZXMgZGUgQ29ydGVzw61hPC9oMj5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxyXG4gICAgICAgICAgICBHZXN0aW9uYSBsYXMgaW52aXRhY2lvbmVzIGdyYXR1aXRhcyBwYXJhIHtldmVudFRpdGxlfVxyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxyXG4gICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwib3V0bGluZVwiIG9uQ2xpY2s9e2V4cG9ydEludml0YXRpb25zfT5cclxuICAgICAgICAgICAgPERvd25sb2FkIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIC8+XHJcbiAgICAgICAgICAgIEV4cG9ydGFyXHJcbiAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDxEaWFsb2cgb3Blbj17aXNCdWxrTW9kYWxPcGVufSBvbk9wZW5DaGFuZ2U9e3NldElzQnVsa01vZGFsT3Blbn0+XHJcbiAgICAgICAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+XHJcbiAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwib3V0bGluZVwiPlxyXG4gICAgICAgICAgICAgICAgPFVzZXJzIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIC8+XHJcbiAgICAgICAgICAgICAgICBJbnZpdGFjacOzbiBNYXNpdmFcclxuICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgPC9EaWFsb2dUcmlnZ2VyPlxyXG4gICAgICAgICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9XCJtYXgtdy0yeGxcIj5cclxuICAgICAgICAgICAgICA8RGlhbG9nSGVhZGVyPlxyXG4gICAgICAgICAgICAgICAgPERpYWxvZ1RpdGxlPkludml0YWNpw7NuIE1hc2l2YTwvRGlhbG9nVGl0bGU+XHJcbiAgICAgICAgICAgICAgICA8RGlhbG9nRGVzY3JpcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgIEFncmVnYSBtw7psdGlwbGVzIGVtYWlscyBzZXBhcmFkb3MgcG9yIGzDrW5lYXMuIEZvcm1hdG86IGVtYWlsQGVqZW1wbG8uY29tLCBOb21icmUgKG9wY2lvbmFsKVxyXG4gICAgICAgICAgICAgICAgPC9EaWFsb2dEZXNjcmlwdGlvbj5cclxuICAgICAgICAgICAgICA8L0RpYWxvZ0hlYWRlcj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJidWxrLWVtYWlsc1wiPkVtYWlscyAobcOheGltbyA1MCk8L0xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICA8VGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICBpZD1cImJ1bGstZW1haWxzXCJcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInVzdWFyaW8xQGVqZW1wbG8uY29tLCBKdWFuIFDDqXJleiYjMTA7dXN1YXJpbzJAZWplbXBsby5jb20mIzEwO3VzdWFyaW8zQGVqZW1wbG8uY29tLCBNYXLDrWEgR2FyY8OtYVwiXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2J1bGtFbWFpbHN9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRCdWxrRW1haWxzKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAgICAgICByb3dzPXsxMH1cclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktZW5kIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cIm91dGxpbmVcIiBvbkNsaWNrPXsoKSA9PiBzZXRJc0J1bGtNb2RhbE9wZW4oZmFsc2UpfT5cclxuICAgICAgICAgICAgICAgICAgICBDYW5jZWxhclxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXthZGRCdWxrSW52aXRhdGlvbnN9PlxyXG4gICAgICAgICAgICAgICAgICAgIENyZWFyIEludml0YWNpb25lc1xyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XHJcbiAgICAgICAgICA8L0RpYWxvZz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7fVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWNhcmQgcm91bmRlZC1sZyBib3JkZXIgcC02XCI+XHJcbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCBtYi00XCI+QWdyZWdhciBJbnZpdGFjacOzbiBJbmRpdmlkdWFsPC9oMz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTMgZ2FwLTRcIj5cclxuICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiZW1haWxcIj5FbWFpbCAqPC9MYWJlbD5cclxuICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgaWQ9XCJlbWFpbFwiXHJcbiAgICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInVzdWFyaW9AZWplbXBsby5jb21cIlxyXG4gICAgICAgICAgICAgIHZhbHVlPXtzaW5nbGVFbWFpbH1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNpbmdsZUVtYWlsKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJuYW1lXCI+Tm9tYnJlIChvcGNpb25hbCk8L0xhYmVsPlxyXG4gICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICBpZD1cIm5hbWVcIlxyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTm9tYnJlIGRlbCBpbnZpdGFkb1wiXHJcbiAgICAgICAgICAgICAgdmFsdWU9e3NpbmdsZU5hbWV9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTaW5nbGVOYW1lKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWVuZFwiPlxyXG4gICAgICAgICAgICA8QnV0dG9uIFxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2FkZFNpbmdsZUludml0YXRpb259XHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzQWRkaW5nSW52aXRhdGlvbiB8fCAhc2luZ2xlRW1haWwudHJpbSgpfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbFwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiAvPlxyXG4gICAgICAgICAgICAgIHtpc0FkZGluZ0ludml0YXRpb24gPyAnQWdyZWdhbmRvLi4uJyA6ICdBZ3JlZ2FyIEludml0YWNpw7NuJ31cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7fVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWNhcmQgcm91bmRlZC1sZyBib3JkZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNiBib3JkZXItYlwiPlxyXG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZFwiPlxyXG4gICAgICAgICAgICBJbnZpdGFjaW9uZXMgKHtpbnZpdGF0aW9ucy5sZW5ndGh9KVxyXG4gICAgICAgICAgPC9oMz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICB7aW52aXRhdGlvbnMubGVuZ3RoID09PSAwID8gKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTggdGV4dC1jZW50ZXIgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XHJcbiAgICAgICAgICAgIDxVc2VycyBjbGFzc05hbWU9XCJ3LTEyIGgtMTIgbXgtYXV0byBtYi00IG9wYWNpdHktNTBcIiAvPlxyXG4gICAgICAgICAgICA8cD5ObyBoYXkgaW52aXRhY2lvbmVzIGNyZWFkYXMgcGFyYSBlc3RlIGV2ZW50bzwvcD5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbVwiPkFncmVnYSB0dSBwcmltZXJhIGludml0YWNpw7NuIGFycmliYTwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICkgOiAoXHJcbiAgICAgICAgICA8VGFibGU+XHJcbiAgICAgICAgICAgIDxUYWJsZUhlYWRlcj5cclxuICAgICAgICAgICAgICA8VGFibGVSb3c+XHJcbiAgICAgICAgICAgICAgICA8VGFibGVIZWFkPkludml0YWRvPC9UYWJsZUhlYWQ+XHJcbiAgICAgICAgICAgICAgICA8VGFibGVIZWFkPkVzdGFkbzwvVGFibGVIZWFkPlxyXG4gICAgICAgICAgICAgICAgPFRhYmxlSGVhZD5GZWNoYXM8L1RhYmxlSGVhZD5cclxuICAgICAgICAgICAgICAgIDxUYWJsZUhlYWQ+VGlja2V0PC9UYWJsZUhlYWQ+XHJcbiAgICAgICAgICAgICAgICA8VGFibGVIZWFkPkNyZWFkbyBwb3I8L1RhYmxlSGVhZD5cclxuICAgICAgICAgICAgICAgIDxUYWJsZUhlYWQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPkFjY2lvbmVzPC9UYWJsZUhlYWQ+XHJcbiAgICAgICAgICAgICAgPC9UYWJsZVJvdz5cclxuICAgICAgICAgICAgPC9UYWJsZUhlYWRlcj5cclxuICAgICAgICAgICAgPFRhYmxlQm9keT5cclxuICAgICAgICAgICAgICB7aW52aXRhdGlvbnMubWFwKChpbnZpdGF0aW9uKSA9PiAoXHJcbiAgICAgICAgICAgICAgICA8VGFibGVSb3cga2V5PXtpbnZpdGF0aW9uLmlkfT5cclxuICAgICAgICAgICAgICAgICAgPFRhYmxlQ2VsbD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPntpbnZpdGF0aW9uLmludml0ZWROYW1lIHx8ICdTaW4gbm9tYnJlJ308L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj57aW52aXRhdGlvbi5pbnZpdGVkRW1haWx9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgICAgICA8VGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgICAgICAgIHtnZXRTdGF0dXNCYWRnZShpbnZpdGF0aW9uKX1cclxuICAgICAgICAgICAgICAgICAgPC9UYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7aW52aXRhdGlvbi5zZW50QXQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkVudmlhZG86IHtmb3JtYXRGdWxsRGF0ZVRpbWUoaW52aXRhdGlvbi5zZW50QXQpfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgIHtpbnZpdGF0aW9uLmFjY2VwdGVkQXQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PkFjZXB0YWRvOiB7Zm9ybWF0RnVsbERhdGVUaW1lKGludml0YXRpb24uYWNjZXB0ZWRBdCl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAge2ludml0YXRpb24uZXhwaXJlc0F0ICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5FeHBpcmE6IHtmb3JtYXRGdWxsRGF0ZVRpbWUoaW52aXRhdGlvbi5leHBpcmVzQXQpfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9UYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgICAgICAge2ludml0YXRpb24udGlja2V0ID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tb25vIHRleHQteHNcIj57aW52aXRhdGlvbi50aWNrZXQucXJDb2RlfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7aW52aXRhdGlvbi50aWNrZXQuaXNVc2VkICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD1cInNlY29uZGFyeVwiIGNsYXNzTmFtZT1cIm10LTFcIj5Vc2FkbzwvQmFkZ2U+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9XCJvdXRsaW5lXCI+U2luIHRpY2tldDwvQmFkZ2U+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgPC9UYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7aW52aXRhdGlvbi5jcmVhdG9yID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtpbnZpdGF0aW9uLmNyZWF0b3IuZmlyc3ROYW1lfSAke2ludml0YXRpb24uY3JlYXRvci5sYXN0TmFtZSB8fCAnJ31gLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1VzdWFyaW8gbm8gZGlzcG9uaWJsZSdcclxuICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxyXG4gICAgICAgICAgICAgICAgICA8VGFibGVDZWxsIGNsYXNzTmFtZT1cInRleHQtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd25NZW51PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duTWVudVRyaWdnZXIgYXNDaGlsZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwiZ2hvc3RcIiBzaXplPVwic21cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8TW9yZUhvcml6b250YWwgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bk1lbnVUcmlnZ2VyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duTWVudUNvbnRlbnQgYWxpZ249XCJlbmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2ludml0YXRpb24uc3RhdHVzID09PSAnUEVORElORycgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bk1lbnVJdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVJbnZpdGF0aW9uQWN0aW9uKGludml0YXRpb24uaWQsICdTRU5EJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbmQgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVudmlhciBJbnZpdGFjacOzblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRHJvcGRvd25NZW51SXRlbT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAge2ludml0YXRpb24uc3RhdHVzID09PSAnU0VOVCcgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bk1lbnVJdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVJbnZpdGF0aW9uQWN0aW9uKGludml0YXRpb24uaWQsICdSRVNFTkQnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWFpbCBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVlbnZpYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Ryb3Bkb3duTWVudUl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHshaW52aXRhdGlvbi50aWNrZXQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bk1lbnVJdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVJbnZpdGF0aW9uQWN0aW9uKGludml0YXRpb24uaWQsICdHRU5FUkFURV9USUNLRVQnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhciBUaWNrZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Ryb3Bkb3duTWVudUl0ZW0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpbnZpdGF0aW9uLnN0YXR1cyAhPT0gJ0VYUElSRUQnICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd25NZW51SXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlSW52aXRhdGlvbkFjdGlvbihpbnZpdGF0aW9uLmlkLCAnQ0FOQ0VMJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFhDaXJjbGUgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbmNlbGFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bk1lbnVJdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd25NZW51SXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGRlbGV0ZUludml0YXRpb24oaW52aXRhdGlvbi5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1kZXN0cnVjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ludml0YXRpb24udGlja2V0Py5pc1VzZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgRWxpbWluYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bk1lbnVJdGVtPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bk1lbnVDb250ZW50PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvRHJvcGRvd25NZW51PlxyXG4gICAgICAgICAgICAgICAgICA8L1RhYmxlQ2VsbD5cclxuICAgICAgICAgICAgICAgIDwvVGFibGVSb3c+XHJcbiAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgIDwvVGFibGVCb2R5PlxyXG4gICAgICAgICAgPC9UYWJsZT5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuIl0sInZlcnNpb24iOjN9