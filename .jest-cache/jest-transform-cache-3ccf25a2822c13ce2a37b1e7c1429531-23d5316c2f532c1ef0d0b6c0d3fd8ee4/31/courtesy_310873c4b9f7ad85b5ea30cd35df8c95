8b86c3c2484e0461f422b603e1eb0e5c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseTimeToMinutes = parseTimeToMinutes;
exports.getCourtesyPrice = getCourtesyPrice;
function parseTimeToMinutes(time) {
    const m = /^([01]?\d|2[0-3]):([0-5]\d)$/.exec(time);
    if (!m)
        return null;
    return parseInt(m[1], 10) * 60 + parseInt(m[2], 10);
}
function getCourtesyPrice(now, cfg) {
    if (!cfg.enabled)
        return null;
    const nowMin = parseTimeToMinutes(now);
    if (nowMin == null)
        return null;
    const untilMin = cfg.validUntil ? parseTimeToMinutes(cfg.validUntil) : null;
    if (untilMin != null && nowMin <= untilMin)
        return 'free';
    return typeof cfg.priceAfter === 'number' ? cfg.priceAfter : null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxCaWx1clxcRG9jdW1lbnRzXFxEZXZlbG9wbWVudFxcTmV4dFxcc29yeWNrLWFjY2Vzc1xcc3JjXFxsaWJcXGNvdXJ0ZXN5LnRzIiwibWFwcGluZ3MiOiI7O0FBTUEsZ0RBSUM7QUFFRCw0Q0FRQztBQWRELFNBQWdCLGtCQUFrQixDQUFDLElBQVk7SUFDN0MsTUFBTSxDQUFDLEdBQUcsOEJBQThCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BELElBQUksQ0FBQyxDQUFDO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDcEIsT0FBTyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3RELENBQUM7QUFFRCxTQUFnQixnQkFBZ0IsQ0FBQyxHQUFXLEVBQUUsR0FBbUI7SUFDL0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDOUIsTUFBTSxNQUFNLEdBQUcsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkMsSUFBSSxNQUFNLElBQUksSUFBSTtRQUFFLE9BQU8sSUFBSSxDQUFDO0lBQ2hDLE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBRTVFLElBQUksUUFBUSxJQUFJLElBQUksSUFBSSxNQUFNLElBQUksUUFBUTtRQUFFLE9BQU8sTUFBTSxDQUFDO0lBQzFELE9BQU8sT0FBTyxHQUFHLENBQUMsVUFBVSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3BFLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCaWx1clxcRG9jdW1lbnRzXFxEZXZlbG9wbWVudFxcTmV4dFxcc29yeWNrLWFjY2Vzc1xcc3JjXFxsaWJcXGNvdXJ0ZXN5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIENvdXJ0ZXN5Q29uZmlnID0ge1xyXG4gIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgdmFsaWRVbnRpbD86IHN0cmluZyB8IG51bGw7IFxuICBwcmljZUFmdGVyPzogbnVtYmVyIHwgbnVsbDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRpbWVUb01pbnV0ZXModGltZTogc3RyaW5nKTogbnVtYmVyIHwgbnVsbCB7XHJcbiAgY29uc3QgbSA9IC9eKFswMV0/XFxkfDJbMC0zXSk6KFswLTVdXFxkKSQvLmV4ZWModGltZSk7XHJcbiAgaWYgKCFtKSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4gcGFyc2VJbnQobVsxXSwgMTApICogNjAgKyBwYXJzZUludChtWzJdLCAxMCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3VydGVzeVByaWNlKG5vdzogc3RyaW5nLCBjZmc6IENvdXJ0ZXN5Q29uZmlnKTogbnVtYmVyIHwgJ2ZyZWUnIHwgbnVsbCB7XHJcbiAgaWYgKCFjZmcuZW5hYmxlZCkgcmV0dXJuIG51bGw7XHJcbiAgY29uc3Qgbm93TWluID0gcGFyc2VUaW1lVG9NaW51dGVzKG5vdyk7XHJcbiAgaWYgKG5vd01pbiA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCB1bnRpbE1pbiA9IGNmZy52YWxpZFVudGlsID8gcGFyc2VUaW1lVG9NaW51dGVzKGNmZy52YWxpZFVudGlsKSA6IG51bGw7XHJcblxyXG4gIGlmICh1bnRpbE1pbiAhPSBudWxsICYmIG5vd01pbiA8PSB1bnRpbE1pbikgcmV0dXJuICdmcmVlJztcclxuICByZXR1cm4gdHlwZW9mIGNmZy5wcmljZUFmdGVyID09PSAnbnVtYmVyJyA/IGNmZy5wcmljZUFmdGVyIDogbnVsbDtcclxufVxyXG4iXSwidmVyc2lvbiI6M30=