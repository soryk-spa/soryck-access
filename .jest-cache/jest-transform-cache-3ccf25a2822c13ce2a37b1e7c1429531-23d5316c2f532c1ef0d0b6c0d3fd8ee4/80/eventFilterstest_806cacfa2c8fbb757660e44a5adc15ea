e044310daf0265864123c7b9ba4a42db
"use strict";
/**
 * Tests para funcionalidades de filtrado de eventos
 * Tests unitarios que no dependen de hooks de React
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock de datos de eventos para testing
const mockEvents = [
    {
        id: '1',
        title: 'Concierto Rock Nacional',
        description: 'Un evento increíble de rock nacional',
        startDate: '2024-03-15T20:00:00Z',
        endDate: '2024-03-15T23:00:00Z',
        location: 'Teatro Municipal, Santiago',
        imageUrl: 'https://example.com/rock.jpg',
        capacity: 500,
        price: 25000,
        currency: 'CLP',
        isFree: false,
        isPublished: true,
        categoryId: 'music',
        organizerId: 'org1',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        category: { id: 'music', name: 'Música' },
        organizer: {
            id: 'org1',
            email: 'organizer@example.com',
            firstName: 'Juan',
            lastName: 'Pérez',
            role: 'ORGANIZER',
        },
        ticketTypes: [
            {
                id: 'ticket1',
                name: 'General',
                price: 25000,
                capacity: 500,
                currency: 'CLP',
                eventId: '1',
                ticketsGenerated: 0,
            },
        ],
        _count: { tickets: 0 },
    },
    {
        id: '2',
        title: 'Workshop de Programación',
        description: 'Aprende React y Next.js desde cero',
        startDate: '2024-04-10T14:00:00Z',
        endDate: '2024-04-10T18:00:00Z',
        location: 'Centro de Innovación, Providencia',
        capacity: 50,
        price: 0,
        currency: 'CLP',
        isFree: true,
        isPublished: true,
        categoryId: 'education',
        organizerId: 'org2',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        category: { id: 'education', name: 'Educación' },
        organizer: {
            id: 'org2',
            email: 'educator@example.com',
            firstName: 'María',
            lastName: 'González',
            role: 'ORGANIZER',
        },
        ticketTypes: [
            {
                id: 'ticket2',
                name: 'Entrada Gratuita',
                price: 0,
                capacity: 50,
                currency: 'CLP',
                eventId: '2',
                ticketsGenerated: 25,
            },
        ],
        _count: { tickets: 25 },
    },
    {
        id: '3',
        title: 'Festival Gastronómico',
        description: 'Los mejores chefs de Chile en un solo lugar',
        startDate: '2024-05-20T12:00:00Z',
        endDate: '2024-05-20T22:00:00Z',
        location: 'Parque Bicentenario, Las Condes',
        capacity: 1000,
        price: 15000,
        currency: 'CLP',
        isFree: false,
        isPublished: false, // No publicado
        categoryId: 'food',
        organizerId: 'org3',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z',
        category: { id: 'food', name: 'Gastronomía' },
        organizer: {
            id: 'org3',
            email: 'chef@example.com',
            firstName: 'Carlos',
            lastName: 'Mendoza',
            role: 'ORGANIZER',
        },
        ticketTypes: [
            {
                id: 'ticket3',
                name: 'Acceso Completo',
                price: 15000,
                capacity: 1000,
                currency: 'CLP',
                eventId: '3',
                ticketsGenerated: 150,
            },
        ],
        _count: { tickets: 150 },
    },
];
// Función de filtrado de eventos (extraída de la lógica real)
function filterEvents(events, filters) {
    return events.filter(event => {
        // Filtro por búsqueda (título y descripción)
        if (filters.search) {
            const searchLower = filters.search.toLowerCase();
            const matchesTitle = event.title.toLowerCase().includes(searchLower);
            const matchesDescription = event.description.toLowerCase().includes(searchLower);
            if (!matchesTitle && !matchesDescription)
                return false;
        }
        // Filtro por categoría
        if (filters.categoryId && event.categoryId !== filters.categoryId) {
            return false;
        }
        // Filtro por precio mínimo
        if (filters.minPrice) {
            const minPrice = parseFloat(filters.minPrice);
            if (event.price < minPrice)
                return false;
        }
        // Filtro por precio máximo
        if (filters.maxPrice) {
            const maxPrice = parseFloat(filters.maxPrice);
            if (event.price > maxPrice)
                return false;
        }
        // Filtro por fecha desde
        if (filters.dateFrom) {
            const fromDate = new Date(filters.dateFrom);
            const eventDate = new Date(event.startDate);
            if (eventDate < fromDate)
                return false;
        }
        // Filtro por fecha hasta
        if (filters.dateTo) {
            const toDate = new Date(filters.dateTo);
            const eventDate = new Date(event.startDate);
            if (eventDate > toDate)
                return false;
        }
        // Filtro por estado de publicación
        if (filters.status === 'published' && !event.isPublished)
            return false;
        if (filters.status === 'draft' && event.isPublished)
            return false;
        // Filtro por eventos gratuitos
        if (filters.isFree !== undefined) {
            if (filters.isFree && !event.isFree)
                return false;
            if (!filters.isFree && event.isFree)
                return false;
        }
        return true;
    });
}
// Función para calcular estadísticas de eventos
function calculateEventStats(events) {
    const published = events.filter(e => e.isPublished);
    const draft = events.filter(e => !e.isPublished);
    const free = events.filter(e => e.isFree);
    const paid = events.filter(e => !e.isFree);
    const totalRevenue = events.reduce((sum, event) => {
        return sum + (event.price * event._count.tickets);
    }, 0);
    const averagePrice = events.length > 0
        ? events.reduce((sum, event) => sum + event.price, 0) / events.length
        : 0;
    const totalTicketsSold = events.reduce((sum, event) => sum + event._count.tickets, 0);
    return {
        total: events.length,
        published: published.length,
        draft: draft.length,
        free: free.length,
        paid: paid.length,
        totalRevenue,
        averagePrice,
        totalTicketsSold,
        averageOccupancy: events.length > 0
            ? events.reduce((sum, event) => {
                const occupancy = event.capacity > 0 ? (event._count.tickets / event.capacity) * 100 : 0;
                return sum + occupancy;
            }, 0) / events.length
            : 0,
    };
}
describe('Funcionalidades de Filtrado de Eventos', () => {
    describe('Filtro por búsqueda de texto', () => {
        it('filtra por título del evento', () => {
            const filters = { search: 'rock' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].title).toBe('Concierto Rock Nacional');
        });
        it('filtra por descripción del evento', () => {
            const filters = { search: 'react' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].title).toBe('Workshop de Programación');
        });
        it('busca de forma case-insensitive', () => {
            const filters = { search: 'ROCK' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].title).toBe('Concierto Rock Nacional');
        });
        it('devuelve array vacío si no encuentra coincidencias', () => {
            const filters = { search: 'inexistente' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(0);
        });
    });
    describe('Filtro por categoría', () => {
        it('filtra eventos por categoría específica', () => {
            const filters = { categoryId: 'music' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].category.name).toBe('Música');
        });
        it('devuelve todos los eventos si no se especifica categoría', () => {
            const filters = {};
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(3);
        });
    });
    describe('Filtro por rango de precios', () => {
        it('filtra por precio mínimo', () => {
            const filters = { minPrice: '20000' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].price).toBeGreaterThanOrEqual(20000);
        });
        it('filtra por precio máximo', () => {
            const filters = { maxPrice: '20000' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(2); // Workshop gratuito + Festival (15000)
            expect(result.every(event => event.price <= 20000)).toBe(true);
        });
        it('combina precio mínimo y máximo', () => {
            const filters = {
                minPrice: '10000',
                maxPrice: '20000'
            };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].title).toBe('Festival Gastronómico');
        });
    });
    describe('Filtro por fechas', () => {
        it('filtra eventos desde una fecha específica', () => {
            const filters = { dateFrom: '2024-04-01' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(2); // Workshop y Festival
            expect(result.every(event => new Date(event.startDate) >= new Date('2024-04-01'))).toBe(true);
        });
        it('filtra eventos hasta una fecha específica', () => {
            const filters = { dateTo: '2024-04-01' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1); // Solo el concierto de marzo
            expect(result[0].title).toBe('Concierto Rock Nacional');
        });
    });
    describe('Filtro por estado de publicación', () => {
        it('filtra solo eventos publicados', () => {
            const filters = { status: 'published' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(2);
            expect(result.every(event => event.isPublished)).toBe(true);
        });
        it('filtra solo borradores', () => {
            const filters = { status: 'draft' };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].isPublished).toBe(false);
        });
    });
    describe('Filtro por eventos gratuitos', () => {
        it('filtra solo eventos gratuitos', () => {
            const filters = { isFree: true };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].isFree).toBe(true);
            expect(result[0].title).toBe('Workshop de Programación');
        });
        it('filtra solo eventos pagados', () => {
            const filters = { isFree: false };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(2);
            expect(result.every(event => !event.isFree)).toBe(true);
        });
    });
    describe('Combinación de filtros', () => {
        it('aplica múltiples filtros simultáneamente', () => {
            const filters = {
                search: 'nacional',
                categoryId: 'music',
                status: 'published',
                isFree: false,
            };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(1);
            expect(result[0].title).toBe('Concierto Rock Nacional');
        });
        it('devuelve array vacío si ningún evento cumple todos los filtros', () => {
            const filters = {
                categoryId: 'music',
                isFree: true, // Contradictorio: música y gratuito
            };
            const result = filterEvents(mockEvents, filters);
            expect(result).toHaveLength(0);
        });
    });
});
describe('Cálculo de Estadísticas de Eventos', () => {
    it('calcula estadísticas básicas correctamente', () => {
        const stats = calculateEventStats(mockEvents);
        expect(stats.total).toBe(3);
        expect(stats.published).toBe(2);
        expect(stats.draft).toBe(1);
        expect(stats.free).toBe(1);
        expect(stats.paid).toBe(2);
    });
    it('calcula ingresos totales correctamente', () => {
        const stats = calculateEventStats(mockEvents);
        // Concierto: 25000 * 0 = 0
        // Workshop: 0 * 25 = 0
        // Festival: 15000 * 150 = 2,250,000
        expect(stats.totalRevenue).toBe(2250000);
    });
    it('calcula precio promedio correctamente', () => {
        const stats = calculateEventStats(mockEvents);
        // (25000 + 0 + 15000) / 3 = 13333.33
        expect(stats.averagePrice).toBeCloseTo(13333.33, 2);
    });
    it('calcula tickets vendidos totales', () => {
        const stats = calculateEventStats(mockEvents);
        expect(stats.totalTicketsSold).toBe(175); // 0 + 25 + 150
    });
    it('calcula ocupación promedio', () => {
        const stats = calculateEventStats(mockEvents);
        // Concierto: 0/500 = 0%
        // Workshop: 25/50 = 50%
        // Festival: 150/1000 = 15%
        // Promedio: (0 + 50 + 15) / 3 = 21.67%
        expect(stats.averageOccupancy).toBeCloseTo(21.67, 2);
    });
    it('maneja array vacío correctamente', () => {
        const stats = calculateEventStats([]);
        expect(stats.total).toBe(0);
        expect(stats.totalRevenue).toBe(0);
        expect(stats.averagePrice).toBe(0);
        expect(stats.averageOccupancy).toBe(0);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxCaWx1clxcRG9jdW1lbnRzXFxEZXZlbG9wbWVudFxcTmV4dFxcc29yeWNrLWFjY2Vzc1xcc3JjXFxfX3Rlc3RzX19cXGxpYlxcZXZlbnRGaWx0ZXJzLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFJSCx3Q0FBd0M7QUFDeEMsTUFBTSxVQUFVLEdBQVk7SUFDMUI7UUFDRSxFQUFFLEVBQUUsR0FBRztRQUNQLEtBQUssRUFBRSx5QkFBeUI7UUFDaEMsV0FBVyxFQUFFLHNDQUFzQztRQUNuRCxTQUFTLEVBQUUsc0JBQXNCO1FBQ2pDLE9BQU8sRUFBRSxzQkFBc0I7UUFDL0IsUUFBUSxFQUFFLDRCQUE0QjtRQUN0QyxRQUFRLEVBQUUsOEJBQThCO1FBQ3hDLFFBQVEsRUFBRSxHQUFHO1FBQ2IsS0FBSyxFQUFFLEtBQUs7UUFDWixRQUFRLEVBQUUsS0FBSztRQUNmLE1BQU0sRUFBRSxLQUFLO1FBQ2IsV0FBVyxFQUFFLElBQUk7UUFDakIsVUFBVSxFQUFFLE9BQU87UUFDbkIsV0FBVyxFQUFFLE1BQU07UUFDbkIsU0FBUyxFQUFFLHNCQUFzQjtRQUNqQyxTQUFTLEVBQUUsc0JBQXNCO1FBQ2pDLFFBQVEsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRTtRQUN6QyxTQUFTLEVBQUU7WUFDVCxFQUFFLEVBQUUsTUFBTTtZQUNWLEtBQUssRUFBRSx1QkFBdUI7WUFDOUIsU0FBUyxFQUFFLE1BQU07WUFDakIsUUFBUSxFQUFFLE9BQU87WUFDakIsSUFBSSxFQUFFLFdBQW9CO1NBQzNCO1FBQ0QsV0FBVyxFQUFFO1lBQ1g7Z0JBQ0UsRUFBRSxFQUFFLFNBQVM7Z0JBQ2IsSUFBSSxFQUFFLFNBQVM7Z0JBQ2YsS0FBSyxFQUFFLEtBQUs7Z0JBQ1osUUFBUSxFQUFFLEdBQUc7Z0JBQ2IsUUFBUSxFQUFFLEtBQUs7Z0JBQ2YsT0FBTyxFQUFFLEdBQUc7Z0JBQ1osZ0JBQWdCLEVBQUUsQ0FBQzthQUNwQjtTQUNGO1FBQ0Qs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QUVILEVBQUUsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7UUFDcEMsTUFBTSxLQUFLLEdBQUcsbUJBQW1CLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFOUMsd0JBQXdCO1FBQ3hCLHdCQUF3QjtRQUN4QiwyQkFBMkI7UUFDM0IsdUNBQXVDO1FBQ3ZDLE1BQU0sQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtRQUMxQyxNQUFNLEtBQUssR0FBRyxtQkFBbUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUV0QyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QixNQUFNLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCaWx1clxcRG9jdW1lbnRzXFxEZXZlbG9wbWVudFxcTmV4dFxcc29yeWNrLWFjY2Vzc1xcc3JjXFxfX3Rlc3RzX19cXGxpYlxcZXZlbnRGaWx0ZXJzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRlc3RzIHBhcmEgZnVuY2lvbmFsaWRhZGVzIGRlIGZpbHRyYWRvIGRlIGV2ZW50b3NcclxuICogVGVzdHMgdW5pdGFyaW9zIHF1ZSBubyBkZXBlbmRlbiBkZSBob29rcyBkZSBSZWFjdFxyXG4gKi9cclxuXHJcbmltcG9ydCB0eXBlIHsgRXZlbnQsIEV2ZW50RmlsdGVycyB9IGZyb20gJ0AvdHlwZXMnO1xyXG5cclxuLy8gTW9jayBkZSBkYXRvcyBkZSBldmVudG9zIHBhcmEgdGVzdGluZ1xyXG5jb25zdCBtb2NrRXZlbnRzOiBFdmVudFtdID0gW1xyXG4gIHtcclxuICAgIGlkOiAnMScsXHJcbiAgICB0aXRsZTogJ0NvbmNpZXJ0byBSb2NrIE5hY2lvbmFsJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnVW4gZXZlbnRvIGluY3Jlw61ibGUgZGUgcm9jayBuYWNpb25hbCcsXHJcbiAgICBzdGFydERhdGU6ICcyMDI0LTAzLTE1VDIwOjAwOjAwWicsXHJcbiAgICBlbmREYXRlOiAnMjAyNC0wMy0xNVQyMzowMDowMFonLFxyXG4gICAgbG9jYXRpb246ICdUZWF0cm8gTXVuaWNpcGFsLCBTYW50aWFnbycsXHJcbiAgICBpbWFnZVVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcm9jay5qcGcnLFxyXG4gICAgY2FwYWNpdHk6IDUwMCxcclxuICAgIHByaWNlOiAyNTAwMCxcclxuICAgIGN1cnJlbmN5OiAnQ0xQJyxcclxuICAgIGlzRnJlZTogZmFsc2UsXHJcbiAgICBpc1B1Ymxpc2hlZDogdHJ1ZSxcclxuICAgIGNhdGVnb3J5SWQ6ICdtdXNpYycsXHJcbiAgICBvcmdhbml6ZXJJZDogJ29yZzEnLFxyXG4gICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxyXG4gICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxyXG4gICAgY2F0ZWdvcnk6IHsgaWQ6ICdtdXNpYycsIG5hbWU6ICdNw7pzaWNhJyB9LFxyXG4gICAgb3JnYW5pemVyOiB7XHJcbiAgICAgIGlkOiAnb3JnMScsXHJcbiAgICAgIGVtYWlsOiAnb3JnYW5pemVyQGV4YW1wbGUuY29tJyxcclxuICAgICAgZmlyc3ROYW1lOiAnSnVhbicsXHJcbiAgICAgIGxhc3ROYW1lOiAnUMOpcmV6JyxcclxuICAgICAgcm9sZTogJ09SR0FOSVpFUicgYXMgY29uc3QsXHJcbiAgICB9LFxyXG4gICAgdGlja2V0VHlwZXM6IFtcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAndGlja2V0MScsXHJcbiAgICAgICAgbmFtZTogJ0dlbmVyYWwnLFxyXG4gICAgICAgIHByaWNlOiAyNTAwMCxcclxuICAgICAgICBjYXBhY2l0eTogNTAwLFxyXG4gICAgICAgIGN1cnJlbmN5OiAnQ0xQJyxcclxuICAgICAgICBldmVudElkOiAnMScsXHJcbiAgICAgICAgdGlja2V0c0dlbmVyYXRlZDogMCxcclxuICAgICAgfSxcclxuICAgIF0sXHJcbiAgICBfY291bnQ6IHsgdGlja2V0czogMCB9LFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICcyJyxcclxuICAgIHRpdGxlOiAnV29ya3Nob3AgZGUgUHJvZ3JhbWFjacOzbicsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0FwcmVuZGUgUmVhY3QgeSBOZXh0LmpzIGRlc2RlIGNlcm8nLFxyXG4gICAgc3RhcnREYXRlOiAnMjAyNC0wNC0xMFQxNDowMDowMFonLFxyXG4gICAgZW5kRGF0ZTogJzIwMjQtMDQtMTBUMTg6MDA6MDBaJyxcclxuICAgIGxvY2F0aW9uOiAnQ2VudHJvIGRlIElubm92YWNpw7NuLCBQcm92aWRlbmNpYScsXHJcbiAgICBjYXBhY2l0eTogNTAsXHJcbiAgICBwcmljZTogMCxcclxuICAgIGN1cnJlbmN5OiAnQ0xQJyxcclxuICAgIGlzRnJlZTogdHJ1ZSxcclxuICAgIGlzUHVibGlzaGVkOiB0cnVlLFxyXG4gICAgY2F0ZWdvcnlJZDogJ2VkdWNhdGlvbicsXHJcbiAgICBvcmdhbml6ZXJJZDogJ29yZzInLFxyXG4gICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxyXG4gICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxyXG4gICAgY2F0ZWdvcnk6IHsgaWQ6ICdlZHVjYXRpb24nLCBuYW1lOiAnRWR1Y2FjacOzbicgfSxcclxuICAgIG9yZ2FuaXplcjoge1xyXG4gICAgICBpZDogJ29yZzInLFxyXG4gICAgICBlbWFpbDogJ2VkdWNhdG9yQGV4YW1wbGUuY29tJyxcclxuICAgICAgZmlyc3ROYW1lOiAnTWFyw61hJyxcclxuICAgICAgbGFzdE5hbWU6ICdHb256w6FsZXonLFxyXG4gICAgICByb2xlOiAnT1JHQU5JWkVSJyBhcyBjb25zdCxcclxuICAgIH0sXHJcbiAgICB0aWNrZXRUeXBlczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICd0aWNrZXQyJyxcclxuICAgICAgICBuYW1lOiAnRW50cmFkYSBHcmF0dWl0YScsXHJcbiAgICAgICAgcHJpY2U6IDAsXHJcbiAgICAgICAgY2FwYWNpdHk6IDUwLFxyXG4gICAgICAgIGN1cnJlbmN5OiAnQ0xQJyxcclxuICAgICAgICBldmVudElkOiAnMicsXHJcbiAgICAgICAgdGlja2V0c0dlbmVyYXRlZDogMjUsXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gICAgX2NvdW50OiB7IHRpY2tldHM6IDI1IH0sXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJzMnLFxyXG4gICAgdGl0bGU6ICdGZXN0aXZhbCBHYXN0cm9uw7NtaWNvJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnTG9zIG1lam9yZXMgY2hlZnMgZGUgQ2hpbGUgZW4gdW4gc29sbyBsdWdhcicsXHJcbiAgICBzdGFydERhdGU6ICcyMDI0LTA1LTIwVDEyOjAwOjAwWicsXHJcbiAgICBlbmREYXRlOiAnMjAyNC0wNS0yMFQyMjowMDowMFonLFxyXG4gICAgbG9jYXRpb246ICdQYXJxdWUgQmljZW50ZW5hcmlvLCBMYXMgQ29uZGVzJyxcclxuICAgIGNhcGFjaXR5OiAxMDAwLFxyXG4gICAgcHJpY2U6IDE1MDAwLFxyXG4gICAgY3VycmVuY3k6ICdDTFAnLFxyXG4gICAgaXNGcmVlOiBmYWxzZSxcclxuICAgIGlzUHVibGlzaGVkOiBmYWxzZSwgLy8gTm8gcHVibGljYWRvXHJcbiAgICBjYXRlZ29yeUlkOiAnZm9vZCcsXHJcbiAgICBvcmdhbml6ZXJJZDogJ29yZzMnLFxyXG4gICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxyXG4gICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxyXG4gICAgY2F0ZWdvcnk6IHsgaWQ6ICdmb29kJywgbmFtZTogJ0dhc3Ryb25vbcOtYScgfSxcclxuICAgIG9yZ2FuaXplcjoge1xyXG4gICAgICBpZDogJ29yZzMnLFxyXG4gICAgICBlbWFpbDogJ2NoZWZAZXhhbXBsZS5jb20nLFxyXG4gICAgICBmaXJzdE5hbWU6ICdDYXJsb3MnLFxyXG4gICAgICBsYXN0TmFtZTogJ01lbmRvemEnLFxyXG4gICAgICByb2xlOiAnT1JHQU5JWkVSJyBhcyBjb25zdCxcclxuICAgIH0sXHJcbiAgICB0aWNrZXRUeXBlczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICd0aWNrZXQzJyxcclxuICAgICAgICBuYW1lOiAnQWNjZXNvIENvbXBsZXRvJyxcclxuICAgICAgICBwcmljZTogMTUwMDAsXHJcbiAgICAgICAgY2FwYWNpdHk6IDEwMDAsXHJcbiAgICAgICAgY3VycmVuY3k6ICdDTFAnLFxyXG4gICAgICAgIGV2ZW50SWQ6ICczJyxcclxuICAgICAgICB0aWNrZXRzR2VuZXJhdGVkOiAxNTAsXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gICAgX2NvdW50OiB7IHRpY2tldHM6IDE1MCB9LFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBGdW5jacOzbiBkZSBmaWx0cmFkbyBkZSBldmVudG9zIChleHRyYcOtZGEgZGUgbGEgbMOzZ2ljYSByZWFsKVxyXG5mdW5jdGlvbiBmaWx0ZXJFdmVudHMoZXZlbnRzOiBFdmVudFtdLCBmaWx0ZXJzOiBFdmVudEZpbHRlcnMpOiBFdmVudFtdIHtcclxuICByZXR1cm4gZXZlbnRzLmZpbHRlcihldmVudCA9PiB7XHJcbiAgICAvLyBGaWx0cm8gcG9yIGLDunNxdWVkYSAodMOtdHVsbyB5IGRlc2NyaXBjacOzbilcclxuICAgIGlmIChmaWx0ZXJzLnNlYXJjaCkge1xyXG4gICAgICBjb25zdCBzZWFyY2hMb3dlciA9IGZpbHRlcnMuc2VhcmNoLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGNvbnN0IG1hdGNoZXNUaXRsZSA9IGV2ZW50LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpO1xyXG4gICAgICBjb25zdCBtYXRjaGVzRGVzY3JpcHRpb24gPSBldmVudC5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKTtcclxuICAgICAgaWYgKCFtYXRjaGVzVGl0bGUgJiYgIW1hdGNoZXNEZXNjcmlwdGlvbikgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbHRybyBwb3IgY2F0ZWdvcsOtYVxyXG4gICAgaWYgKGZpbHRlcnMuY2F0ZWdvcnlJZCAmJiBldmVudC5jYXRlZ29yeUlkICE9PSBmaWx0ZXJzLmNhdGVnb3J5SWQpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbHRybyBwb3IgcHJlY2lvIG3DrW5pbW9cclxuICAgIGlmIChmaWx0ZXJzLm1pblByaWNlKSB7XHJcbiAgICAgIGNvbnN0IG1pblByaWNlID0gcGFyc2VGbG9hdChmaWx0ZXJzLm1pblByaWNlKTtcclxuICAgICAgaWYgKGV2ZW50LnByaWNlIDwgbWluUHJpY2UpIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaWx0cm8gcG9yIHByZWNpbyBtw6F4aW1vXHJcbiAgICBpZiAoZmlsdGVycy5tYXhQcmljZSkge1xyXG4gICAgICBjb25zdCBtYXhQcmljZSA9IHBhcnNlRmxvYXQoZmlsdGVycy5tYXhQcmljZSk7XHJcbiAgICAgIGlmIChldmVudC5wcmljZSA+IG1heFByaWNlKSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmlsdHJvIHBvciBmZWNoYSBkZXNkZVxyXG4gICAgaWYgKGZpbHRlcnMuZGF0ZUZyb20pIHtcclxuICAgICAgY29uc3QgZnJvbURhdGUgPSBuZXcgRGF0ZShmaWx0ZXJzLmRhdGVGcm9tKTtcclxuICAgICAgY29uc3QgZXZlbnREYXRlID0gbmV3IERhdGUoZXZlbnQuc3RhcnREYXRlKTtcclxuICAgICAgaWYgKGV2ZW50RGF0ZSA8IGZyb21EYXRlKSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmlsdHJvIHBvciBmZWNoYSBoYXN0YVxyXG4gICAgaWYgKGZpbHRlcnMuZGF0ZVRvKSB7XHJcbiAgICAgIGNvbnN0IHRvRGF0ZSA9IG5ldyBEYXRlKGZpbHRlcnMuZGF0ZVRvKTtcclxuICAgICAgY29uc3QgZXZlbnREYXRlID0gbmV3IERhdGUoZXZlbnQuc3RhcnREYXRlKTtcclxuICAgICAgaWYgKGV2ZW50RGF0ZSA+IHRvRGF0ZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbHRybyBwb3IgZXN0YWRvIGRlIHB1YmxpY2FjacOzblxyXG4gICAgaWYgKGZpbHRlcnMuc3RhdHVzID09PSAncHVibGlzaGVkJyAmJiAhZXZlbnQuaXNQdWJsaXNoZWQpIHJldHVybiBmYWxzZTtcclxuICAgIGlmIChmaWx0ZXJzLnN0YXR1cyA9PT0gJ2RyYWZ0JyAmJiBldmVudC5pc1B1Ymxpc2hlZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIC8vIEZpbHRybyBwb3IgZXZlbnRvcyBncmF0dWl0b3NcclxuICAgIGlmIChmaWx0ZXJzLmlzRnJlZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlmIChmaWx0ZXJzLmlzRnJlZSAmJiAhZXZlbnQuaXNGcmVlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICghZmlsdGVycy5pc0ZyZWUgJiYgZXZlbnQuaXNGcmVlKSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgY2FsY3VsYXIgZXN0YWTDrXN0aWNhcyBkZSBldmVudG9zXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUV2ZW50U3RhdHMoZXZlbnRzOiBFdmVudFtdKSB7XHJcbiAgY29uc3QgcHVibGlzaGVkID0gZXZlbnRzLmZpbHRlcihlID0+IGUuaXNQdWJsaXNoZWQpO1xyXG4gIGNvbnN0IGRyYWZ0ID0gZXZlbnRzLmZpbHRlcihlID0+ICFlLmlzUHVibGlzaGVkKTtcclxuICBjb25zdCBmcmVlID0gZXZlbnRzLmZpbHRlcihlID0+IGUuaXNGcmVlKTtcclxuICBjb25zdCBwYWlkID0gZXZlbnRzLmZpbHRlcihlID0+ICFlLmlzRnJlZSk7XHJcblxyXG4gIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IGV2ZW50cy5yZWR1Y2UoKHN1bSwgZXZlbnQpID0+IHtcclxuICAgIHJldHVybiBzdW0gKyAoZXZlbnQucHJpY2UgKiBldmVudC5fY291bnQudGlja2V0cyk7XHJcbiAgfSwgMCk7XHJcblxyXG4gIGNvbnN0IGF2ZXJhZ2VQcmljZSA9IGV2ZW50cy5sZW5ndGggPiAwIFxyXG4gICAgPyBldmVudHMucmVkdWNlKChzdW0sIGV2ZW50KSA9PiBzdW0gKyBldmVudC5wcmljZSwgMCkgLyBldmVudHMubGVuZ3RoIFxyXG4gICAgOiAwO1xyXG5cclxuICBjb25zdCB0b3RhbFRpY2tldHNTb2xkID0gZXZlbnRzLnJlZHVjZSgoc3VtLCBldmVudCkgPT4gc3VtICsgZXZlbnQuX2NvdW50LnRpY2tldHMsIDApO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdG90YWw6IGV2ZW50cy5sZW5ndGgsXHJcbiAgICBwdWJsaXNoZWQ6IHB1Ymxpc2hlZC5sZW5ndGgsXHJcbiAgICBkcmFmdDogZHJhZnQubGVuZ3RoLFxyXG4gICAgZnJlZTogZnJlZS5sZW5ndGgsXHJcbiAgICBwYWlkOiBwYWlkLmxlbmd0aCxcclxuICAgIHRvdGFsUmV2ZW51ZSxcclxuICAgIGF2ZXJhZ2VQcmljZSxcclxuICAgIHRvdGFsVGlja2V0c1NvbGQsXHJcbiAgICBhdmVyYWdlT2NjdXBhbmN5OiBldmVudHMubGVuZ3RoID4gMCBcclxuICAgICAgPyBldmVudHMucmVkdWNlKChzdW0sIGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBvY2N1cGFuY3kgPSBldmVudC5jYXBhY2l0eSA+IDAgPyAoZXZlbnQuX2NvdW50LnRpY2tldHMgLyBldmVudC5jYXBhY2l0eSkgKiAxMDAgOiAwO1xyXG4gICAgICAgICAgcmV0dXJuIHN1bSArIG9jY3VwYW5jeTtcclxuICAgICAgICB9LCAwKSAvIGV2ZW50cy5sZW5ndGggXHJcbiAgICAgIDogMCxcclxuICB9O1xyXG59XHJcblxyXG5kZXNjcmliZSgnRnVuY2lvbmFsaWRhZGVzIGRlIEZpbHRyYWRvIGRlIEV2ZW50b3MnLCAoKSA9PiB7XHJcbiAgZGVzY3JpYmUoJ0ZpbHRybyBwb3IgYsO6c3F1ZWRhIGRlIHRleHRvJywgKCkgPT4ge1xyXG4gICAgaXQoJ2ZpbHRyYSBwb3IgdMOtdHVsbyBkZWwgZXZlbnRvJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJzOiBFdmVudEZpbHRlcnMgPSB7IHNlYXJjaDogJ3JvY2snIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckV2ZW50cyhtb2NrRXZlbnRzLCBmaWx0ZXJzKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS50aXRsZSkudG9CZSgnQ29uY2llcnRvIFJvY2sgTmFjaW9uYWwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdmaWx0cmEgcG9yIGRlc2NyaXBjacOzbiBkZWwgZXZlbnRvJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJzOiBFdmVudEZpbHRlcnMgPSB7IHNlYXJjaDogJ3JlYWN0JyB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBmaWx0ZXJFdmVudHMobW9ja0V2ZW50cywgZmlsdGVycyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0udGl0bGUpLnRvQmUoJ1dvcmtzaG9wIGRlIFByb2dyYW1hY2nDs24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdidXNjYSBkZSBmb3JtYSBjYXNlLWluc2Vuc2l0aXZlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJzOiBFdmVudEZpbHRlcnMgPSB7IHNlYXJjaDogJ1JPQ0snIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckV2ZW50cyhtb2NrRXZlbnRzLCBmaWx0ZXJzKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS50aXRsZSkudG9CZSgnQ29uY2llcnRvIFJvY2sgTmFjaW9uYWwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZXZ1ZWx2ZSBhcnJheSB2YWPDrW8gc2kgbm8gZW5jdWVudHJhIGNvaW5jaWRlbmNpYXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbHRlcnM6IEV2ZW50RmlsdGVycyA9IHsgc2VhcmNoOiAnaW5leGlzdGVudGUnIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckV2ZW50cyhtb2NrRXZlbnRzLCBmaWx0ZXJzKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRmlsdHJvIHBvciBjYXRlZ29yw61hJywgKCkgPT4ge1xyXG4gICAgaXQoJ2ZpbHRyYSBldmVudG9zIHBvciBjYXRlZ29yw61hIGVzcGVjw61maWNhJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJzOiBFdmVudEZpbHRlcnMgPSB7IGNhdGVnb3J5SWQ6ICdtdXNpYycgfTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gZmlsdGVyRXZlbnRzKG1vY2tFdmVudHMsIGZpbHRlcnMpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNhdGVnb3J5Lm5hbWUpLnRvQmUoJ03DunNpY2EnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZXZ1ZWx2ZSB0b2RvcyBsb3MgZXZlbnRvcyBzaSBubyBzZSBlc3BlY2lmaWNhIGNhdGVnb3LDrWEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbHRlcnM6IEV2ZW50RmlsdGVycyA9IHt9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBmaWx0ZXJFdmVudHMobW9ja0V2ZW50cywgZmlsdGVycyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0ZpbHRybyBwb3IgcmFuZ28gZGUgcHJlY2lvcycsICgpID0+IHtcclxuICAgIGl0KCdmaWx0cmEgcG9yIHByZWNpbyBtw61uaW1vJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJzOiBFdmVudEZpbHRlcnMgPSB7IG1pblByaWNlOiAnMjAwMDAnIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckV2ZW50cyhtb2NrRXZlbnRzLCBmaWx0ZXJzKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5wcmljZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgyMDAwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZmlsdHJhIHBvciBwcmVjaW8gbcOheGltbycsICgpID0+IHtcclxuICAgICAgY29uc3QgZmlsdGVyczogRXZlbnRGaWx0ZXJzID0geyBtYXhQcmljZTogJzIwMDAwJyB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBmaWx0ZXJFdmVudHMobW9ja0V2ZW50cywgZmlsdGVycyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7IC8vIFdvcmtzaG9wIGdyYXR1aXRvICsgRmVzdGl2YWwgKDE1MDAwKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmV2ZXJ5KGV2ZW50ID0+IGV2ZW50LnByaWNlIDw9IDIwMDAwKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdjb21iaW5hIHByZWNpbyBtw61uaW1vIHkgbcOheGltbycsICgpID0+IHtcclxuICAgICAgY29uc3QgZmlsdGVyczogRXZlbnRGaWx0ZXJzID0geyBcclxuICAgICAgICBtaW5QcmljZTogJzEwMDAwJywgXHJcbiAgICAgICAgbWF4UHJpY2U6ICcyMDAwMCcgXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckV2ZW50cyhtb2NrRXZlbnRzLCBmaWx0ZXJzKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS50aXRsZSkudG9CZSgnRmVzdGl2YWwgR2FzdHJvbsOzbWljbycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdGaWx0cm8gcG9yIGZlY2hhcycsICgpID0+IHtcclxuICAgIGl0KCdmaWx0cmEgZXZlbnRvcyBkZXNkZSB1bmEgZmVjaGEgZXNwZWPDrWZpY2EnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbHRlcnM6IEV2ZW50RmlsdGVycyA9IHsgZGF0ZUZyb206ICcyMDI0LTA0LTAxJyB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBmaWx0ZXJFdmVudHMobW9ja0V2ZW50cywgZmlsdGVycyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7IC8vIFdvcmtzaG9wIHkgRmVzdGl2YWxcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ldmVyeShldmVudCA9PiBuZXcgRGF0ZShldmVudC5zdGFydERhdGUpID49IG5ldyBEYXRlKCcyMDI0LTA0LTAxJykpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2ZpbHRyYSBldmVudG9zIGhhc3RhIHVuYSBmZWNoYSBlc3BlY8OtZmljYScsICgpID0+IHtcclxuICAgICAgY29uc3QgZmlsdGVyczogRXZlbnRGaWx0ZXJzID0geyBkYXRlVG86ICcyMDI0LTA0LTAxJyB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBmaWx0ZXJFdmVudHMobW9ja0V2ZW50cywgZmlsdGVycyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7IC8vIFNvbG8gZWwgY29uY2llcnRvIGRlIG1hcnpvXHJcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0udGl0bGUpLnRvQmUoJ0NvbmNpZXJ0byBSb2NrIE5hY2lvbmFsJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0ZpbHRybyBwb3IgZXN0YWRvIGRlIHB1YmxpY2FjacOzbicsICgpID0+IHtcclxuICAgIGl0KCdmaWx0cmEgc29sbyBldmVudG9zIHB1YmxpY2Fkb3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbHRlcnM6IEV2ZW50RmlsdGVycyA9IHsgc3RhdHVzOiAncHVibGlzaGVkJyB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBmaWx0ZXJFdmVudHMobW9ja0V2ZW50cywgZmlsdGVycyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXZlcnkoZXZlbnQgPT4gZXZlbnQuaXNQdWJsaXNoZWQpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2ZpbHRyYSBzb2xvIGJvcnJhZG9yZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbHRlcnM6IEV2ZW50RmlsdGVycyA9IHsgc3RhdHVzOiAnZHJhZnQnIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckV2ZW50cyhtb2NrRXZlbnRzLCBmaWx0ZXJzKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5pc1B1Ymxpc2hlZCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0ZpbHRybyBwb3IgZXZlbnRvcyBncmF0dWl0b3MnLCAoKSA9PiB7XHJcbiAgICBpdCgnZmlsdHJhIHNvbG8gZXZlbnRvcyBncmF0dWl0b3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbHRlcnM6IEV2ZW50RmlsdGVycyA9IHsgaXNGcmVlOiB0cnVlIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbHRlckV2ZW50cyhtb2NrRXZlbnRzLCBmaWx0ZXJzKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5pc0ZyZWUpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0udGl0bGUpLnRvQmUoJ1dvcmtzaG9wIGRlIFByb2dyYW1hY2nDs24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdmaWx0cmEgc29sbyBldmVudG9zIHBhZ2Fkb3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbHRlcnM6IEV2ZW50RmlsdGVycyA9IHsgaXNGcmVlOiBmYWxzZSB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBmaWx0ZXJFdmVudHMobW9ja0V2ZW50cywgZmlsdGVycyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXZlcnkoZXZlbnQgPT4gIWV2ZW50LmlzRnJlZSkpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvbWJpbmFjacOzbiBkZSBmaWx0cm9zJywgKCkgPT4ge1xyXG4gICAgaXQoJ2FwbGljYSBtw7psdGlwbGVzIGZpbHRyb3Mgc2ltdWx0w6FuZWFtZW50ZScsICgpID0+IHtcclxuICAgICAgY29uc3QgZmlsdGVyczogRXZlbnRGaWx0ZXJzID0ge1xyXG4gICAgICAgIHNlYXJjaDogJ25hY2lvbmFsJyxcclxuICAgICAgICBjYXRlZ29yeUlkOiAnbXVzaWMnLFxyXG4gICAgICAgIHN0YXR1czogJ3B1Ymxpc2hlZCcsXHJcbiAgICAgICAgaXNGcmVlOiBmYWxzZSxcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gZmlsdGVyRXZlbnRzKG1vY2tFdmVudHMsIGZpbHRlcnMpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QocmVzdWx0WzBdLnRpdGxlKS50b0JlKCdDb25jaWVydG8gUm9jayBOYWNpb25hbCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RldnVlbHZlIGFycmF5IHZhY8OtbyBzaSBuaW5nw7puIGV2ZW50byBjdW1wbGUgdG9kb3MgbG9zIGZpbHRyb3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbHRlcnM6IEV2ZW50RmlsdGVycyA9IHtcclxuICAgICAgICBjYXRlZ29yeUlkOiAnbXVzaWMnLFxyXG4gICAgICAgIGlzRnJlZTogdHJ1ZSwgLy8gQ29udHJhZGljdG9yaW86IG3DunNpY2EgeSBncmF0dWl0b1xyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBmaWx0ZXJFdmVudHMobW9ja0V2ZW50cywgZmlsdGVycyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcblxyXG5kZXNjcmliZSgnQ8OhbGN1bG8gZGUgRXN0YWTDrXN0aWNhcyBkZSBFdmVudG9zJywgKCkgPT4ge1xyXG4gIGl0KCdjYWxjdWxhIGVzdGFkw61zdGljYXMgYsOhc2ljYXMgY29ycmVjdGFtZW50ZScsICgpID0+IHtcclxuICAgIGNvbnN0IHN0YXRzID0gY2FsY3VsYXRlRXZlbnRTdGF0cyhtb2NrRXZlbnRzKTtcclxuXHJcbiAgICBleHBlY3Qoc3RhdHMudG90YWwpLnRvQmUoMyk7XHJcbiAgICBleHBlY3Qoc3RhdHMucHVibGlzaGVkKS50b0JlKDIpO1xyXG4gICAgZXhwZWN0KHN0YXRzLmRyYWZ0KS50b0JlKDEpO1xyXG4gICAgZXhwZWN0KHN0YXRzLmZyZWUpLnRvQmUoMSk7XHJcbiAgICBleHBlY3Qoc3RhdHMucGFpZCkudG9CZSgyKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2NhbGN1bGEgaW5ncmVzb3MgdG90YWxlcyBjb3JyZWN0YW1lbnRlJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhdHMgPSBjYWxjdWxhdGVFdmVudFN0YXRzKG1vY2tFdmVudHMpO1xyXG5cclxuICAgIC8vIENvbmNpZXJ0bzogMjUwMDAgKiAwID0gMFxyXG4gICAgLy8gV29ya3Nob3A6IDAgKiAyNSA9IDBcclxuICAgIC8vIEZlc3RpdmFsOiAxNTAwMCAqIDE1MCA9IDIsMjUwLDAwMFxyXG4gICAgZXhwZWN0KHN0YXRzLnRvdGFsUmV2ZW51ZSkudG9CZSgyMjUwMDAwKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2NhbGN1bGEgcHJlY2lvIHByb21lZGlvIGNvcnJlY3RhbWVudGUnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBzdGF0cyA9IGNhbGN1bGF0ZUV2ZW50U3RhdHMobW9ja0V2ZW50cyk7XHJcblxyXG4gICAgLy8gKDI1MDAwICsgMCArIDE1MDAwKSAvIDMgPSAxMzMzMy4zM1xyXG4gICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VQcmljZSkudG9CZUNsb3NlVG8oMTMzMzMuMzMsIDIpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnY2FsY3VsYSB0aWNrZXRzIHZlbmRpZG9zIHRvdGFsZXMnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBzdGF0cyA9IGNhbGN1bGF0ZUV2ZW50U3RhdHMobW9ja0V2ZW50cyk7XHJcblxyXG4gICAgZXhwZWN0KHN0YXRzLnRvdGFsVGlja2V0c1NvbGQpLnRvQmUoMTc1KTsgLy8gMCArIDI1ICsgMTUwXHJcbiAgfSk7XHJcblxyXG4gIGl0KCdjYWxjdWxhIG9jdXBhY2nDs24gcHJvbWVkaW8nLCAoKSA9PiB7XHJcbiAgICBjb25zdCBzdGF0cyA9IGNhbGN1bGF0ZUV2ZW50U3RhdHMobW9ja0V2ZW50cyk7XHJcblxyXG4gICAgLy8gQ29uY2llcnRvOiAwLzUwMCA9IDAlXHJcbiAgICAvLyBXb3Jrc2hvcDogMjUvNTAgPSA1MCVcclxuICAgIC8vIEZlc3RpdmFsOiAxNTAvMTAwMCA9IDE1JVxyXG4gICAgLy8gUHJvbWVkaW86ICgwICsgNTAgKyAxNSkgLyAzID0gMjEuNjclXHJcbiAgICBleHBlY3Qoc3RhdHMuYXZlcmFnZU9jY3VwYW5jeSkudG9CZUNsb3NlVG8oMjEuNjcsIDIpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnbWFuZWphIGFycmF5IHZhY8OtbyBjb3JyZWN0YW1lbnRlJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhdHMgPSBjYWxjdWxhdGVFdmVudFN0YXRzKFtdKTtcclxuXHJcbiAgICBleHBlY3Qoc3RhdHMudG90YWwpLnRvQmUoMCk7XHJcbiAgICBleHBlY3Qoc3RhdHMudG90YWxSZXZlbnVlKS50b0JlKDApO1xyXG4gICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VQcmljZSkudG9CZSgwKTtcclxuICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlT2NjdXBhbmN5KS50b0JlKDApO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9